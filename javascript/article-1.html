<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>数据类型 | 前端食堂</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/assets/logo.png">
    <meta name="description" content="A lightweight creator for VuePress project.">
    <link rel="preload" href="/assets/css/0.styles.a0bdfdfc.css" as="style"><link rel="preload" href="/assets/js/app.297cbe38.js" as="script"><link rel="preload" href="/assets/js/3.74b310ed.js" as="script"><link rel="preload" href="/assets/js/39.f6ab4637.js" as="script"><link rel="prefetch" href="/assets/js/10.2cb4252a.js"><link rel="prefetch" href="/assets/js/11.84195d0b.js"><link rel="prefetch" href="/assets/js/12.99922e8c.js"><link rel="prefetch" href="/assets/js/13.e933f068.js"><link rel="prefetch" href="/assets/js/14.ac37b5f6.js"><link rel="prefetch" href="/assets/js/15.0ca846a4.js"><link rel="prefetch" href="/assets/js/16.5bb89187.js"><link rel="prefetch" href="/assets/js/17.ee12d807.js"><link rel="prefetch" href="/assets/js/18.ab1887b7.js"><link rel="prefetch" href="/assets/js/19.5cc22fdc.js"><link rel="prefetch" href="/assets/js/20.329addb7.js"><link rel="prefetch" href="/assets/js/21.c39c3d03.js"><link rel="prefetch" href="/assets/js/22.4b2a4625.js"><link rel="prefetch" href="/assets/js/23.c579329b.js"><link rel="prefetch" href="/assets/js/24.27361bff.js"><link rel="prefetch" href="/assets/js/25.ceb28791.js"><link rel="prefetch" href="/assets/js/26.b03616fe.js"><link rel="prefetch" href="/assets/js/27.f9440421.js"><link rel="prefetch" href="/assets/js/28.54b87ba6.js"><link rel="prefetch" href="/assets/js/29.8ec65517.js"><link rel="prefetch" href="/assets/js/30.1bf88e2a.js"><link rel="prefetch" href="/assets/js/31.6c4d3d02.js"><link rel="prefetch" href="/assets/js/32.fb7071fa.js"><link rel="prefetch" href="/assets/js/33.d6f2a94a.js"><link rel="prefetch" href="/assets/js/34.5e399a3e.js"><link rel="prefetch" href="/assets/js/35.3acd0425.js"><link rel="prefetch" href="/assets/js/36.78ec183b.js"><link rel="prefetch" href="/assets/js/37.f9728d1d.js"><link rel="prefetch" href="/assets/js/38.1bf134e8.js"><link rel="prefetch" href="/assets/js/4.d0cd8535.js"><link rel="prefetch" href="/assets/js/40.2ef36b4f.js"><link rel="prefetch" href="/assets/js/41.93f45d18.js"><link rel="prefetch" href="/assets/js/42.aec6da59.js"><link rel="prefetch" href="/assets/js/43.d62e0931.js"><link rel="prefetch" href="/assets/js/44.2820c42d.js"><link rel="prefetch" href="/assets/js/45.0e459d5b.js"><link rel="prefetch" href="/assets/js/46.de66f200.js"><link rel="prefetch" href="/assets/js/47.37e6bfeb.js"><link rel="prefetch" href="/assets/js/48.c49e08c2.js"><link rel="prefetch" href="/assets/js/49.7c5b3d1f.js"><link rel="prefetch" href="/assets/js/5.2a66155c.js"><link rel="prefetch" href="/assets/js/50.08a70dfd.js"><link rel="prefetch" href="/assets/js/51.c50c547d.js"><link rel="prefetch" href="/assets/js/52.0353a465.js"><link rel="prefetch" href="/assets/js/53.5866843b.js"><link rel="prefetch" href="/assets/js/54.4c76ec09.js"><link rel="prefetch" href="/assets/js/55.e2d45d00.js"><link rel="prefetch" href="/assets/js/56.40d578c9.js"><link rel="prefetch" href="/assets/js/57.90aa6436.js"><link rel="prefetch" href="/assets/js/58.0fb4da38.js"><link rel="prefetch" href="/assets/js/59.5a2a439f.js"><link rel="prefetch" href="/assets/js/6.feef556c.js"><link rel="prefetch" href="/assets/js/60.ff15aaaf.js"><link rel="prefetch" href="/assets/js/61.f20de356.js"><link rel="prefetch" href="/assets/js/62.13531d49.js"><link rel="prefetch" href="/assets/js/63.1e39920f.js"><link rel="prefetch" href="/assets/js/64.6ffb28d1.js"><link rel="prefetch" href="/assets/js/65.0a4871be.js"><link rel="prefetch" href="/assets/js/66.eb592ae7.js"><link rel="prefetch" href="/assets/js/67.7e81dfca.js"><link rel="prefetch" href="/assets/js/68.65945d55.js"><link rel="prefetch" href="/assets/js/69.bea1e7e1.js"><link rel="prefetch" href="/assets/js/7.e54d7447.js"><link rel="prefetch" href="/assets/js/70.2b6f8144.js"><link rel="prefetch" href="/assets/js/71.1e8b1f04.js"><link rel="prefetch" href="/assets/js/72.360b7cde.js"><link rel="prefetch" href="/assets/js/73.1b3645fb.js"><link rel="prefetch" href="/assets/js/74.8180063d.js"><link rel="prefetch" href="/assets/js/8.54bfb320.js"><link rel="prefetch" href="/assets/js/9.996f8f86.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.10206f39.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a0bdfdfc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">前端食堂</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><a class="ant-dropdown-link ant-dropdown-trigger">
      Hover me <i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></a> <a href="https://github.com/wjhuan/frontend-learn-route" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/javascript/" aria-current="page" title="README.md" class="sidebar-link">README.md</a></li><li><a href="/javascript/article-1.html" aria-current="page" title="数据类型" class="active sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/article-1.html#原始数据类型-值类型-基本数据类型" title="原始数据类型[值类型/基本数据类型]" class="sidebar-link">原始数据类型[值类型/基本数据类型]</a></li><li class="sidebar-sub-header"><a href="/javascript/article-1.html#对象类型-引用数据类型" title="对象类型[引用数据类型]" class="sidebar-link">对象类型[引用数据类型]</a></li><li class="sidebar-sub-header"><a href="/javascript/article-1.html#数据类型检测的方式" title="数据类型检测的方式" class="sidebar-link">数据类型检测的方式</a></li><li class="sidebar-sub-header"><a href="/javascript/article-1.html#_0-1-0-2-0-3" title="0.1 + 0.2 != 0.3" class="sidebar-link">0.1 + 0.2 != 0.3</a></li><li class="sidebar-sub-header"><a href="/javascript/article-1.html#数据类型转换的底层机制" title="数据类型转换的底层机制" class="sidebar-link">数据类型转换的底层机制</a></li><li class="sidebar-sub-header"><a href="/javascript/article-1.html#其他数据类型转换为-string" title="其他数据类型转换为 String" class="sidebar-link">其他数据类型转换为 String</a></li><li class="sidebar-sub-header"><a href="/javascript/article-1.html#其他数据类型转换为-boolean" title="其他数据类型转换为 Boolean" class="sidebar-link">其他数据类型转换为 Boolean</a></li><li class="sidebar-sub-header"><a href="/javascript/article-1.html#比较时候的相互转换规则" title="“==”比较时候的相互转换规则" class="sidebar-link">“==”比较时候的相互转换规则</a></li><li class="sidebar-sub-header"><a href="/javascript/article-1.html#综合练习题" title="综合练习题" class="sidebar-link">综合练习题</a></li></ul></li><li><a href="/javascript/article-2.html" title="JS底层堆栈内存处理机制" class="sidebar-link">JS底层堆栈内存处理机制</a></li><li><a href="/javascript/article-3.html" title="闭包作用域和浏览器垃圾回收机制" class="sidebar-link">闭包作用域和浏览器垃圾回收机制</a></li><li><a href="/javascript/article-4.html" title="this的几种基本情况" class="sidebar-link">this的几种基本情况</a></li><li><a href="/javascript/article-5.html" title="面向对象" class="sidebar-link">面向对象</a></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="原始数据类型-值类型-基本数据类型"><a href="#原始数据类型-值类型-基本数据类型" class="header-anchor">#</a> 原始数据类型[值类型/基本数据类型]</h2> <ul><li><p><code>number</code> 数字类型</p> <blockquote><p><code>number</code> 包括 <code>正数</code> <code>负数</code> <code>0</code> <code>1.2</code> <code>NaN(不是一个数、但是它属于number类型)</code> <code>Infinity(无限大)</code> <code>-Infinity(无限小)</code></p></blockquote></li> <li><p><code>string</code> 字符串类型</p></li> <li><p><code>boolean</code> 布尔类型</p></li> <li><p><code>null</code> 空对象指针</p></li> <li><p><code>undefined</code> 未定义</p></li> <li><p><code>symbol</code> 唯一值</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//Uncaught TypeError: Symbol is not a constructor</span>
<span class="token comment">// 作用1：可以给对象设置唯一值类型的属性「对象“属性名”的类型：string、symbol」</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'BB'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhufeng'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">xxx</span><span class="token operator">:</span> <span class="token string">'xxx'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// &quot;[object Object]&quot;:200</span>
  <span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">// &quot;10,20&quot;:300</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>sym<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">'0'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//undefined  这是两个不同的唯一值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>sym<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//500</span>
<span class="token comment">// ----</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//问题：for in循环是无法迭代symbol类型的私有属性</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// ----</span>
<span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取非symbol类型的私有属性(返回包含属性名的数组)</span>
keys <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取symbol类型的私有属性</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ----</span>
<span class="token keyword">let</span> keys <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取所有私有属性，不论是啥类型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">*</span><span class="token operator">/</span>
<span class="token comment">// 作用2：把Symbol做为对象，提供的很多静态属性方法，是JS很多的知识的底层实现原理</span>
 Symbol<span class="token punctuation">.</span>toPrimitive<span class="token operator">/</span>hasInstance<span class="token operator">/</span>toStringTag<span class="token operator">/</span>iterator<span class="token operator">/</span>asyncIterator<span class="token operator">...</span>
<span class="token comment">// 作用3：vuex/redux中我们需要派发很多行为标识，我们可以把这些行为标识统一管理，为了保证行为标识的唯一性，所以可以基于symbol处理</span>
</code></pre></div><ul><li><code>bigint</code> 大数
<blockquote><p><code>Number.MAX_SAFE_INTEGER</code> 最大安全数字 <code>9007199254740991</code>，超过这个数字进行运算，运算结果不一定准确
需求：服务器端数据库存储值有 longInt(大数类型),如果服务器返回这样的值(一般会以字符串形式返回),而且需要客户端在这个值基础上再次运算,我们该如何处理呢?</p></blockquote></li></ul> <ol><li>把服务器获取的值[value]先转换为 bigint 类型 BigInt([value]) -&gt; BV 数组后加 n</li> <li>基于 BV 进行运算(运算的另外一个值也是 bigint 类型的)</li> <li>把运算的结果转换为字符串(去掉 n)再传递给服务器即可</li></ol> <h2 id="对象类型-引用数据类型"><a href="#对象类型-引用数据类型" class="header-anchor">#</a> 对象类型[引用数据类型]</h2> <ul><li>标准普通对象 <code>object</code></li> <li>标准特殊对象 <code>Array</code>、<code>RegExp</code>、<code>Date</code>、<code>Math</code>、<code>Error</code>....</li> <li>非标准特殊对象 <code>Number</code>、<code>String</code>、<code>Boolean</code>....</li> <li>可调用/执行对象[函数] <code>function</code>....</li></ul> <h2 id="数据类型检测的方式"><a href="#数据类型检测的方式" class="header-anchor">#</a> 数据类型检测的方式</h2> <ol><li><p>Object.prototype.toString.call([value])</p> <ul><li>粗暴、准确、没有任何副作用</li> <li>除<code>Object.prototype.toString</code>之外，其余构造函数原型上的<code>toString</code>一般都是用来“转换字符串的”，只有它是用来检测数据类型的，返回的结果 <code>[object ?]</code></li> <li><code>[value][Symbol.toStringTag]</code> 有这个属性，属性值是啥，则结果中的<code>?</code>就是啥</li> <li>没有这个属性则一般找到的是自己所属的构造函数(以内置的为主)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Number]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Number]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object String]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Boolean]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Null]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Undefined]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Symbol]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">10n</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object BigInt]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Object]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Array]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object RegExp]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Date]&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&quot;[object Function]&quot;</span>
</code></pre></div></li> <li><p>[value] instanceof [Constructor]</p> <ul><li>[对象] instanceof [构造函数] 检测对象是否为这个类的实例，基于这个特点可以“临时”拿来检测数据类型</li> <li>对原始值类型无效：<code>instanceof</code>左侧只要是原始值类型，结果就是<code>false</code>，默认不会进行<code>装箱</code></li> <li>无法检测是否为<code>标准普通对象</code>：因为所有对象都是<code>Object</code>的一个实例，检测结果都是<code>true</code></li> <li>因为我们可以修改原型链的指向，所以检测的结果不一定是准确的
<blockquote><p>传统版本：<code>instanceof</code>检测是按照实例的原型链进行查找的，只要<code>构造函数.prototype</code> 出现在了<code>对象</code>的原型链上，那么检测结果都是<code>true</code>！
新版本：在<code>Function.prototype</code>上有一个<code>Symbol.hasInstance</code>属性方法(所有函数都可以使用)，当我们基于 <code>[对象]</code> instanceof <code>[构造函数]</code>检测处理的时候，内部是这样处理的：<code>[构造函数][Symbol.hasInstance]([对象])</code></p></blockquote></li></ul></li> <li><p>[value].constructor</p> <ul><li>可以检测是否为纯粹对象(标准普通对象)</li> <li>对原始值(除<code>null/undefined</code>,因为他们两个无法进行成员访问)也有效
<blockquote><p>它也是个临时工，局限性也很多，最主要的就是不准「因为我们可以随意修改 constructor」</p></blockquote></li></ul></li> <li><p>Array.isArray([value])</p></li> <li><p>isNaN([value])</p></li></ol> <h3 id="重写-instanceof"><a href="#重写-instanceof" class="header-anchor">#</a> 重写 instanceof</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">instance_of</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">instance_of</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> Ctor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 右侧必须是一个函数</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Ctor <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;Right-hand side of 'instanceof' is not callable&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// 原始值检测都是false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(object|function)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token comment">// 构造函数必须具备prototype</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Ctor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span>
      <span class="token string">&quot;Function has non-object prototype 'undefined' in instanceof check&quot;</span>
    <span class="token punctuation">)</span>
  <span class="token comment">// 支持Symbol.hasInstance的使用这个方法处理</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Symbol <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Ctor<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token comment">// 不支持：自己按照原型链查找</span>
  <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>proto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token class-name">Ctor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="typeof-数据类型检测的底层机制"><a href="#typeof-数据类型检测的底层机制" class="header-anchor">#</a> typeof 数据类型检测的底层机制</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">12.5</span><span class="token number">.6</span><span class="token number">.1</span> Runtime Semantics<span class="token operator">:</span> Evaluation
<span class="token literal-property property">UnaryExpression</span> <span class="token operator">:</span> <span class="token keyword">typeof</span> UnaryExpression
Let val be the result <span class="token keyword">of</span> evaluating UnaryExpression<span class="token punctuation">.</span>
If <span class="token function">Type</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> is Reference<span class="token punctuation">,</span> then
If <span class="token function">IsUnresolvableReference</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> is <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">return</span> “<span class="token keyword">undefined</span>”<span class="token punctuation">.</span>
Let val be <span class="token function">GetValue</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">ReturnIfAbrupt</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span>
Return a String according to Table <span class="token number">35.</span>

<span class="token literal-property property">UnaryExpression</span><span class="token operator">:</span> UnaryExpression的类型
设val为对UnaryExpression求值的结果。
<span class="token function">如果类型</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>是引用，则
<span class="token function">如果IsUnresolvableReference</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>为真，则返回“<span class="token keyword">undefined</span>”。
<span class="token function">让val为GetValue</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>。
<span class="token function">ReturnIfAbrupt</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span>。
根据表<span class="token number">35</span>返回一个字符串。
</code></pre></div><ol><li><p>特点 1：返回的结果是字符串，字符串中包含了对应的数据类型</p> <blockquote><p>typeof typeof typeof [1,2,3]</p></blockquote></li> <li><p>特点 2：按照计算机底层存储的二进制进行检测「效率高」</p> <ul><li>计算机科学：计算机原理、进制转化、计算机网络、数据结构和算法……</li> <li>000 对象</li> <li>1 整数</li> <li>010 浮点数</li> <li>100 字符串</li> <li>110 布尔</li> <li>000000 null</li> <li>-2^30 undefined</li></ul></li> <li><p>特点 3：typeof null -&gt; “object”</p> <ul><li>JS 中创建的所有类型值，在计算机底层都是按照“二进制”形式进行存储</li> <li>typeof 检测也是根据二进制值进行检测，其中就有一条规则,如果是以“000”开始的二进制，则被识别为对象(null 存储的二进制值都是 0，符合以 000 开始)；然后再去看对象是否实现了[[call]]，实现了则为函数(返回“function”)，没实现就是对象(返回“object”)；</li> <li>因为是按照二进制值进行检测，所以检测速度是比较快的</li></ul></li> <li><p>特点 4：typeof 对象 -&gt; “object” &amp;&amp; typeof 函数 -&gt; “function”</p> <blockquote><p>验证是否是对象的判断,typeof 检测对象类型，除函数被识别为“function”，其余都是“object”「不能细分对象」</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(object|function)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>typeof 未被声明的变量 -&gt; “undefined”</p> <blockquote><p>插件封装中的暴露 API</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> utils <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> window<span class="token punctuation">.</span>utils <span class="token operator">=</span> utils
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module<span class="token punctuation">.</span>exports <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> utils
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <h2 id="_0-1-0-2-0-3"><a href="#_0-1-0-2-0-3" class="header-anchor">#</a> 0.1 + 0.2 != 0.3</h2> <ol><li>所有值在计算机底层都是按照二进制存储的，运算也是基于二进制来的</li> <li>整数运算一般不会有问题, 最大安全数字<code>「16位」</code> <code>Number.MAX_SAFE_INTEGER === Math.pow(2,53)-1</code></li> <li>小数运算一般会出现问题</li> <li>浮点数转为二进制会出现“无限循环”的情况，计算机底层存储的时候按照可以识别的最长位数存储，其余的直接干掉... 所以浮点数存储的二进制值本身就是去了精准度,所以最后运算的结果也是缺乏精准度的，而且小数最后面的零会省略，但凡不是 0，都不会省略 =&gt; 0.1+0.2=0.30000000000000004 0.1+0.6=0.7(0.70000000000....)</li> <li>怎么解决精度问题？
<ul><li>将数字转成整数「扩大系数」</li> <li>三方库：Math.js 、decimal.js、big.js ...</li></ul></li></ol> <blockquote><p>把十进制转换为二进制、整数：除 2 取余，最后倒着拼接、小数：乘以 2，取整，一直到结果是 1 为止、[10 进制 value].toString(2)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 运算保证精准度，实现思路：把小数变为整数（乘以系数）运算,运算后的结果再除以系数</span>
<span class="token keyword">const</span> <span class="token function-variable function">coefficient</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">coefficient</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  num <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> char <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">]</span> <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    len <span class="token operator">=</span> char<span class="token punctuation">.</span>length
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">plus</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">plus</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  n <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
  m <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">NaN</span>
  <span class="token keyword">let</span> coeffic <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">coefficient</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">coefficient</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>n <span class="token operator">*</span> coeffic <span class="token operator">+</span> m <span class="token operator">*</span> coeffic<span class="token punctuation">)</span> <span class="token operator">/</span> coeffic
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="数据类型转换的底层机制"><a href="#数据类型转换的底层机制" class="header-anchor">#</a> 数据类型转换的底层机制</h2> <h3 id="把其他数据类型转换为-number"><a href="#把其他数据类型转换为-number" class="header-anchor">#</a> 把其他数据类型转换为 Number</h3> <h4 id="number-val"><a href="#number-val" class="header-anchor">#</a> Number([val])</h4> <ul><li><p>一般用于浏览器的隐式转换中</p> <ol><li>数学运算</li> <li>isNaN 检测</li> <li>==比较</li></ol></li> <li><p>规则</p> <ol><li>字符串转换为数字：空字符串变为<code>0</code>，如果出现任何非有效数字字符，结果都是<code>NaN</code></li> <li>把布尔转换为数字：<code>true-&gt;1</code> <code>false-&gt;0</code></li> <li><code>null-&gt;0</code> <code>undefined-&gt;NaN</code></li> <li><code>Symbol</code>无法转换为数字，会报错：<code>Uncaught TypeError: Cannot convert a Symbol value to a number</code></li> <li><code>BigInt</code>去除<code>n</code>（超过安全数字的，会按照科学计数法处理）</li> <li>把对象转换为数字
<ul><li>先调用对象的 <code>Symbol.toPrimitive</code> 这个方法，如果不存在这个方法</li> <li>再调用对象的 <code>valueOf</code> 获取原始值，如果获取的值不是原始值</li> <li>再调用对象的 <code>toString</code> 把其变为字符串</li> <li>最后再把字符串基于<code>Number</code>方法转换为数字</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// NaN  [10, 20].toString()-&gt;'10,20'-&gt;NaN</span>
<span class="token number">1</span>、<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">undefined</span> <span class="token comment">// 不具备这个方法</span>
<span class="token number">2</span>、<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token comment">// 不是原始值</span>
<span class="token number">3</span>、<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'10'</span>
<span class="token number">4</span><span class="token function">、Number</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">10</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
<span class="token number">1</span>、obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">undefined</span>
<span class="token number">2</span>、obj<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">// 非原始值</span>
<span class="token number">3</span>、obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">&quot;[object Object]&quot;</span>
<span class="token number">4</span><span class="token function">、Number</span><span class="token punctuation">(</span><span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">NaN</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
onsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token number">1</span>、num<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">undefined</span>
<span class="token number">2</span>、num<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">10</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1637158306237</span>
<span class="token number">1</span>、time<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> 函数
<span class="token number">2</span>、time<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>  执行这个方法可以传递三个参数 <span class="token string">'number'</span><span class="token operator">/</span><span class="token string">'string'</span><span class="token operator">/</span><span class="token string">'default'</span>  <span class="token operator">=&gt;</span> <span class="token function">除了Number</span><span class="token punctuation">(</span>对象<span class="token punctuation">)</span><span class="token function">按照这个流程处理，String</span><span class="token punctuation">(</span>对象<span class="token punctuation">)</span>把对象变为字符串也按照这个规则处理，如果存在Symbol<span class="token punctuation">.</span>toPrimitive，则执行传递的是<span class="token string">'string'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'12px1312'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//12</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'12px1312'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//NaN</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//0</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//NaN   先变为字符串然后处理 parseInt('null')</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//0</span>
</code></pre></div><ul><li>parseInt([val],[radix]) parseFloat([val])
<ol><li>一般用于手动转换</li> <li>规则：[val]值必须是一个字符串，如果不是则先转换为字符串；然后从字符串左侧第一个字符开始找，把找到的有效数字字符最后转换为数字「一个都没找到就是 NaN」；遇到一个非有效数字字符，不论后面是否还有有效数字字符，都不再查找了；<code>parseFloat</code>可以多识别一个小数点；</li> <li>[radix]
<ul><li>在<code>parseInt</code>本身处理规则的基础上，还可以设置<code>[radix]</code>进制：在<code>[val]</code>字符串中，从左到右查找符合<code>[radix]</code>进制的内容（遇到一个不符合的则结束查找），把找到的内容当做<code>[radix]</code>进制值最后转换为<code>10进制</code></li> <li>把其它进制转换为<code>10进制</code> <code>按权展开求和</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// '10011'(2进制) -&gt; 10进制</span>
<span class="token number">1</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">4</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">0</span> <span class="token operator">=&gt;</span> <span class="token number">19</span>
</code></pre></div><ul><li><code>[radix]</code>不设置（或者设置为零），则默认值是<code>10</code>；但是如果字符串是以<code>‘0x’</code>开头的，则默认值是<code>16</code>；</li> <li><code>[radix]</code>有取值范围：<code>2~36</code>，不在范围内，最后处理的结果都是<code>NaN</code></li> <li>在浏览器中有一个特殊情况：如果数字(不是字符串)是以<code>0</code>开始的，浏览器会认为这应该是<code>8进制</code>的值，它会把<code>8进制</code>默认转化为<code>10进制</code>再处理</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 012 -&gt; 10</span>
<span class="token number">0</span><span class="token operator">*</span><span class="token number">8</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">*</span><span class="token number">8</span><span class="token operator">^</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span><span class="token number">8</span><span class="token operator">^</span><span class="token number">0</span> <span class="token operator">=&gt;</span> <span class="token number">10</span>
</code></pre></div></li></ol></li></ul></li></ol></li></ul> <h3 id="parseint-练习题"><a href="#parseint-练习题" class="header-anchor">#</a> parseInt 练习题</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">27.2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'0013'</span><span class="token punctuation">,</span> <span class="token string">'14px'</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">]</span>
<span class="token comment">// arr = arr.map((item, index) =&gt; {</span>
<span class="token comment">//   console.log(item, index)</span>
<span class="token comment">//   return '@'</span>
<span class="token comment">// })</span>
<span class="token comment">// console.log(arr)</span>
arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>parseInt<span class="token punctuation">)</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">27.2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'27.2'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">27</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">NaN</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'0013'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'001'</span> 二进制转十进制 <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">0</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">0</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'14px'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'1'</span> 三进制转十进制 <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">^</span><span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'123'</span> 四进制转十进制 <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">^</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">^</span><span class="token number">0</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">27</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">//=&gt;[27,NaN,1,1,27]</span>
</code></pre></div><h2 id="其他数据类型转换为-string"><a href="#其他数据类型转换为-string" class="header-anchor">#</a> 其他数据类型转换为 String</h2> <blockquote><p>其它类型值转换为字符串<code>String([value])</code>常用于隐式转换 或者 <code>[value].toString()</code>常用于显示转换</p></blockquote> <blockquote><p>对象转换为字符串基于这两种方式还是有区别的</p></blockquote> <ol><li>对象.toString():直接调取所属类原型上的 toString 方法进行处理</li> <li>String(对象):首先获取对象<code>[Symbol.toPrimitive]</code> 这个属性，如果存在这个属性则<code>对象[Symbol.toPrimitive]('string')</code>；如果不存在，则继续调用 <code>对象.valueOf()</code>，如果获取的是原始值则结束即可；如果不是，才会调用<code>toString</code>方法进行处理...</li> <li>标准普通对象调用的<code>toString</code>是<code>Object.prototype.toString</code>，是用来检测数据类型的，而不是转换为字符串的</li></ol> <blockquote><p>常见的隐式转换为字符串情况</p></blockquote> <ol><li><p>字符串拼接「“+” 在 JS 中除了数学运算也有字符串拼接的意思」</p> <ul><li>有两边，一边是字符串，一定是字符串拼接,<code>代码：[value]+'' =&gt; 把[value]转换为字符串</code></li> <li>有两边，一边是对象：可能会是字符串拼接，因为其要把对象转换为数字，转换过程中如果遇到转换为字符串，则直接变为字符串拼接；如果遇不到还是数学运算；</li> <li>只有一边 +[value]：一定是把[value]转换为数字的</li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">12</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// '1213'</span>
<span class="token number">1</span>、<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token string">&quot;13&quot;</span> <span class="token parameter">直接变为字符串拼接了</span>  <span class="token operator">=&gt;</span> “<span class="token number">1213</span>”
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">12</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span> <span class="token string">'Fri Nov 19 2021 20:36:52 GMT+0800 (中国标准时间)'</span> 字符串拼接
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">12</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 25</span>
<span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token number">13</span> <span class="token parameter">数学运算</span> <span class="token operator">=&gt;</span> <span class="token number">25</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token string">'10'</span>
i<span class="token operator">++</span> <span class="token comment">// 一定是数学运算，转换为数字累加1</span>
i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
i <span class="token operator">+=</span> <span class="token number">1</span> <span class="token comment">// 有字符串拼接的情况</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token string">'10'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">+</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token comment">//++i 先把i累加1-&gt;11  再拿累加的结果和10运算  =&gt;21 i=11</span>
i <span class="token operator">=</span> <span class="token string">'10'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">+</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">//i++ 先拿i的值和10运算，再让i累加1  =&gt;20 i=11</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span>
  <span class="token number">100</span> <span class="token operator">+</span> <span class="token boolean">true</span> <span class="token operator">+</span> <span class="token number">21.2</span> <span class="token operator">+</span> <span class="token keyword">null</span> <span class="token operator">+</span> <span class="token keyword">undefined</span> <span class="token operator">+</span> <span class="token string">'Tencent'</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token keyword">null</span> <span class="token operator">+</span> <span class="token number">9</span> <span class="token operator">+</span> <span class="token boolean">false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// &quot;NaNTencentnull9false&quot;</span>

<span class="token boolean">true</span><span class="token function">是Boolean值，Number</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>；输出<span class="token number">1</span>，<span class="token number">100</span><span class="token operator">+</span><span class="token boolean">true</span><span class="token operator">=</span><span class="token number">101</span>

<span class="token comment">// 101+21.2=122.2</span>

<span class="token comment">// 122.2+null  //输出122.2;             Number(null)  //输出0</span>

<span class="token comment">// 122.2+undefined；//输出NaN        undefined转化为数字为非法运算，输出NaN,既not a number</span>

<span class="token comment">// NaN+&quot;Tencent&quot;;   //输出&quot;NaNTencent&quot;          NaN转化为字符串为&quot;NaN&quot;</span>

<span class="token comment">// &quot;NaNTencent&quot;+[];   //输出&quot;NaNTencent&quot;        []为空数组，转化为字符串为&quot;&quot;</span>

<span class="token comment">// &quot;NaNTencent&quot;  +null;   //输出&quot;NaNTencentnull&quot;          null转化为字符串为&quot;null&quot;</span>

<span class="token comment">// &quot;NaNTencentnull&quot; +9；  //输出&quot;NaNTencentnull9&quot;   </span>

<span class="token comment">// &quot;NaNTencentnull9&quot;   +false；  //输出&quot;NaNTencentnull9false&quot;      false转化为字符串为&quot;false&quot; </span>
————————————————
</code></pre></div><h2 id="其他数据类型转换为-boolean"><a href="#其他数据类型转换为-boolean" class="header-anchor">#</a> 其他数据类型转换为 Boolean</h2> <blockquote><p>转换规则：除了<code>“0/NaN/空字符串/null/undefined”</code>五个值是<code>false</code>，其余都是<code>true</code>
出现情况</p></blockquote> <ol><li>Boolean([val]) 或者 !/!!</li> <li>条件判断</li></ol> <h2 id="比较时候的相互转换规则"><a href="#比较时候的相互转换规则" class="header-anchor">#</a> “==”比较时候的相互转换规则</h2> <blockquote><p>“==”相等，两边数据类型不同，需要先转为相同类型，然后再进行比较</p></blockquote> <ol><li>对象==字符串 对象转字符串「Symbol.toPrimitive -&gt; valueOf -&gt; toString」</li> <li>null==undefined -&gt; true null/undefined 和其他任何值都不相等</li> <li>null===undefined -&gt; false</li> <li>对象==对象 比较的是堆内存地址，地址相同则相等</li> <li>NaN!==NaN</li> <li>除了以上情况，只要两边类型不一致，剩下的都是转换为数字，然后再进行比较的</li></ol> <blockquote><p>“===”绝对相等，如果两边类型不同，则直接是 false，不会转换数据类型「推荐」</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">//都转换为数字  0==0  =&gt;  true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">//![] 先转换为布尔再取反 false==false =&gt; true</span>
</code></pre></div><h2 id="综合练习题"><a href="#综合练习题" class="header-anchor">#</a> 综合练习题</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token operator">?</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>方案一：利用==比较会把 a 转换为数字，再根据对象转数字会经理一系列的步骤，此时我们可以重写某一步骤，实现自己的需求</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token comment">// 重写：Symbol.toPrimitive/valueOf/toString</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>i
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// a == 1  Number(a) -&gt; a[Symbol.toPrimitive]()</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token comment">// 重写：Symbol.toPrimitive/valueOf/toString</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>i
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token comment">// 重写：Symbol.toPrimitive/valueOf/toString</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>i
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>方案二：在全局上下文中基于 var 声明变量，是给 window 全局对象设置属性，再利用数据劫持，可以实现这个需求</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">++</span>i
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/25/2023, 2:30:47 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/javascript/" class="prev router-link-active"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        README.md
      </a></span> <span class="next"><a href="/javascript/article-2.html">
        JS底层堆栈内存处理机制
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.297cbe38.js" defer></script><script src="/assets/js/3.74b310ed.js" defer></script><script src="/assets/js/39.f6ab4637.js" defer></script>
  </body>
</html>