<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>接口 | 前端食堂</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/assets/logo.png">
    <meta name="description" content="A lightweight creator for VuePress project.">
    <link rel="preload" href="/assets/css/0.styles.a0bdfdfc.css" as="style"><link rel="preload" href="/assets/js/app.4dbfa5ba.js" as="script"><link rel="preload" href="/assets/js/3.07e453d2.js" as="script"><link rel="preload" href="/assets/js/58.d60e6c11.js" as="script"><link rel="prefetch" href="/assets/js/10.4de6e24c.js"><link rel="prefetch" href="/assets/js/11.5e088bfd.js"><link rel="prefetch" href="/assets/js/12.5643949f.js"><link rel="prefetch" href="/assets/js/13.e71c3ac2.js"><link rel="prefetch" href="/assets/js/14.b00bd365.js"><link rel="prefetch" href="/assets/js/15.dc0a8b14.js"><link rel="prefetch" href="/assets/js/16.2be6ad5b.js"><link rel="prefetch" href="/assets/js/17.7c397769.js"><link rel="prefetch" href="/assets/js/18.209a8413.js"><link rel="prefetch" href="/assets/js/19.7fc425b4.js"><link rel="prefetch" href="/assets/js/20.4fe5e4e4.js"><link rel="prefetch" href="/assets/js/21.14c927ce.js"><link rel="prefetch" href="/assets/js/22.6346f949.js"><link rel="prefetch" href="/assets/js/23.7be7ec98.js"><link rel="prefetch" href="/assets/js/24.264e22d7.js"><link rel="prefetch" href="/assets/js/25.37b5cec0.js"><link rel="prefetch" href="/assets/js/26.9b924fa8.js"><link rel="prefetch" href="/assets/js/27.8249b24b.js"><link rel="prefetch" href="/assets/js/28.70063944.js"><link rel="prefetch" href="/assets/js/29.0ec7c188.js"><link rel="prefetch" href="/assets/js/30.20ed72a9.js"><link rel="prefetch" href="/assets/js/31.08971c60.js"><link rel="prefetch" href="/assets/js/32.9c89db9c.js"><link rel="prefetch" href="/assets/js/33.2ea737a3.js"><link rel="prefetch" href="/assets/js/34.51586146.js"><link rel="prefetch" href="/assets/js/35.75488e58.js"><link rel="prefetch" href="/assets/js/36.0ebe42ae.js"><link rel="prefetch" href="/assets/js/37.ed22d644.js"><link rel="prefetch" href="/assets/js/38.4a406f5f.js"><link rel="prefetch" href="/assets/js/39.75d32d7e.js"><link rel="prefetch" href="/assets/js/4.32e896fa.js"><link rel="prefetch" href="/assets/js/40.5a7e3a27.js"><link rel="prefetch" href="/assets/js/41.4598a9f8.js"><link rel="prefetch" href="/assets/js/42.cc579875.js"><link rel="prefetch" href="/assets/js/43.88828352.js"><link rel="prefetch" href="/assets/js/44.3ce0919f.js"><link rel="prefetch" href="/assets/js/45.5298d15f.js"><link rel="prefetch" href="/assets/js/46.7858831a.js"><link rel="prefetch" href="/assets/js/47.fc8cd65f.js"><link rel="prefetch" href="/assets/js/48.a588a94e.js"><link rel="prefetch" href="/assets/js/49.fa8491b6.js"><link rel="prefetch" href="/assets/js/5.5f9feea4.js"><link rel="prefetch" href="/assets/js/50.e4b7a19b.js"><link rel="prefetch" href="/assets/js/51.8a89feda.js"><link rel="prefetch" href="/assets/js/52.324e82f6.js"><link rel="prefetch" href="/assets/js/53.14a9fb7e.js"><link rel="prefetch" href="/assets/js/54.dd9dbf6b.js"><link rel="prefetch" href="/assets/js/55.f680761d.js"><link rel="prefetch" href="/assets/js/56.e4a8df5e.js"><link rel="prefetch" href="/assets/js/57.70a0c19f.js"><link rel="prefetch" href="/assets/js/59.8ac9ea50.js"><link rel="prefetch" href="/assets/js/6.efaa7167.js"><link rel="prefetch" href="/assets/js/60.e66036fc.js"><link rel="prefetch" href="/assets/js/61.152bdf55.js"><link rel="prefetch" href="/assets/js/62.9dff9634.js"><link rel="prefetch" href="/assets/js/63.0521e297.js"><link rel="prefetch" href="/assets/js/64.82d40486.js"><link rel="prefetch" href="/assets/js/65.7e9de142.js"><link rel="prefetch" href="/assets/js/66.4cedea26.js"><link rel="prefetch" href="/assets/js/67.cc042e11.js"><link rel="prefetch" href="/assets/js/68.6ccad48f.js"><link rel="prefetch" href="/assets/js/69.8f626271.js"><link rel="prefetch" href="/assets/js/7.dee96963.js"><link rel="prefetch" href="/assets/js/70.ca30a373.js"><link rel="prefetch" href="/assets/js/71.018bbc9a.js"><link rel="prefetch" href="/assets/js/72.53b48f8c.js"><link rel="prefetch" href="/assets/js/73.a7a84ac1.js"><link rel="prefetch" href="/assets/js/74.d476af95.js"><link rel="prefetch" href="/assets/js/75.6a7253a9.js"><link rel="prefetch" href="/assets/js/76.0adcd845.js"><link rel="prefetch" href="/assets/js/8.e2434c92.js"><link rel="prefetch" href="/assets/js/9.c298f810.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.2069ace8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a0bdfdfc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">前端食堂</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><a class="ant-dropdown-link ant-dropdown-trigger">
      Hover me <i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></a> <a href="https://github.com/wjhuan/frontend-learn-route" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/typescript/" aria-current="page" title="README.md" class="sidebar-link">README.md</a></li><li><a href="/typescript/article-1.html" title="初识TypeScript" class="sidebar-link">初识TypeScript</a></li><li><a href="/typescript/article-2.html" title="数据类型" class="sidebar-link">数据类型</a></li><li><a href="/typescript/article-3.html" title="函数" class="sidebar-link">函数</a></li><li><a href="/typescript/article-4.html" title="类" class="sidebar-link">类</a></li><li><a href="/typescript/article-5.html" aria-current="page" title="接口" class="active sidebar-link">接口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/typescript/article-5.html#对象的形状" title="对象的形状" class="sidebar-link">对象的形状</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#行为的抽象" title="行为的抽象" class="sidebar-link">行为的抽象</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#任意属性" title="任意属性" class="sidebar-link">任意属性</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#接口的继承" title="接口的继承" class="sidebar-link">接口的继承</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#readonly" title="readonly" class="sidebar-link">readonly</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#函数类型" title="函数类型" class="sidebar-link">函数类型</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#索引类型" title="索引类型" class="sidebar-link">索引类型</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#类类型" title="类类型" class="sidebar-link">类类型</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#构造函数类型" title="构造函数类型" class="sidebar-link">构造函数类型</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#混合类型" title="混合类型" class="sidebar-link">混合类型</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#接口继承类" title="接口继承类" class="sidebar-link">接口继承类</a></li><li class="sidebar-sub-header"><a href="/typescript/article-5.html#抽象类-vs-接口" title="抽象类 vs 接口" class="sidebar-link">抽象类 vs 接口</a></li></ul></li><li><a href="/typescript/article-6.html" title="泛型" class="sidebar-link">泛型</a></li><li><a href="/typescript/article-7.html" title="兼容性" class="sidebar-link">兼容性</a></li><li><a href="/typescript/article-8.html" title="类型保护" class="sidebar-link">类型保护</a></li><li><a href="/typescript/article-9.html" title="类型变换" class="sidebar-link">类型变换</a></li><li><a href="/typescript/article-10.html" title="类型声明" class="sidebar-link">类型声明</a></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h1> <p><code>TypeScript</code> 的核心原则之一是对值所具有的结构进行类型检查。它有时被称做“鸭式辨型法”或“结构性子类型化”。 在 <code>TypeScript</code> 里，接口的作用就是为这些类型命名和为你的代码或第三方代码定义契约</p> <ul><li>接口一方面可以在面向对象编程中表示为行为的抽象，另外可以用来描述对象的形状</li> <li>接口就是把一些类中共有的属性和方法抽象出来,可以用来约束实现此接口的类</li> <li>一个类可以继承另一个类并实现多个接口</li> <li>接口像插件一样是用来增强类的，而抽象类是具体类的抽象概念</li> <li>一个类可以实现多个接口，一个接口也可以被多个类实现，但一个类的可以有多个子类，但只能有一个父类</li> <li><code>interface</code>中可以用分号或者逗号分割每一项，也可以什么都不加</li></ul> <h2 id="对象的形状"><a href="#对象的形状" class="header-anchor">#</a> 对象的形状</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//接口可以用来描述对象的形状,少属性或者多属性都会报错</span>
<span class="token keyword">interface</span> <span class="token class-name">Speakable</span> <span class="token punctuation">{</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">//？表示可选属性</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> speakman<span class="token operator">:</span> Speakable <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//少属性会报错</span>
  name<span class="token punctuation">,</span>
  age<span class="token punctuation">,</span> <span class="token comment">//多属性也会报错</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="行为的抽象"><a href="#行为的抽象" class="header-anchor">#</a> 行为的抽象</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//接口可以在面向对象编程中表示为行为的抽象</span>
<span class="token keyword">interface</span> <span class="token class-name">Speakable</span> <span class="token punctuation">{</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Eatable</span> <span class="token punctuation">{</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
<span class="token comment">//一个类可以实现多个接口</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Speakable</span><span class="token punctuation">,</span> Eatable <span class="token punctuation">{</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Person说话'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">TangDuck</span> <span class="token keyword">implements</span> <span class="token class-name">Speakable</span> <span class="token punctuation">{</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'TangDuck说话'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="任意属性"><a href="#任意属性" class="header-anchor">#</a> 任意属性</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//无法预先知道有哪些新的属性的时候,可以使用 `[propName:string]:any`,propName名字是任意的</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">number</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token punctuation">[</span>propName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'wjh'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="接口的继承"><a href="#接口的继承" class="header-anchor">#</a> 接口的继承</h2> <p>和类一样，接口也可以相互继承。 这让我们能够从一个接口里复制成员到另一个接口里，可以更灵活地将接口分割到可重用的模块里。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  sideLength<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> square <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Square
square<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'blue'</span>
square<span class="token punctuation">.</span>sideLength <span class="token operator">=</span> <span class="token number">10</span>
</code></pre></div><p>一个接口可以继承多个接口，创建出多个接口的合成接口。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">PenStroke</span> <span class="token punctuation">{</span>
  penWidth<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span><span class="token punctuation">,</span> PenStroke <span class="token punctuation">{</span>
  sideLength<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> square <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Square
square<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'blue'</span>
square<span class="token punctuation">.</span>sideLength <span class="token operator">=</span> <span class="token number">10</span>
square<span class="token punctuation">.</span>penWidth <span class="token operator">=</span> <span class="token number">5.0</span>
</code></pre></div><h2 id="readonly"><a href="#readonly" class="header-anchor">#</a> readonly</h2> <p>一些对象属性只能在对象刚刚创建的时候修改其值。 你可以在属性名前用 <code>readonly</code> 来指定只读属性:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> x<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token keyword">readonly</span> y<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你可以通过赋值一个对象字面量来构造一个 <code>Point</code>。 赋值后，<code>x</code> 和 <code>y</code> 再也不能被改变了。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> p1<span class="token operator">:</span> Point <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
p1<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">5</span> <span class="token comment">// error!</span>
</code></pre></div><p><code>TypeScript</code> 具有 <code>ReadonlyArray&lt;T&gt;</code> 类型，它与 <code>Array&lt;T&gt;</code> 相似，只是把所有可变方法去掉了，因此可以确保数组创建后再也不能被修改：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> ro<span class="token operator">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> a
ro<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span> <span class="token comment">// error!</span>
ro<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// error!</span>
ro<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// error!</span>
a <span class="token operator">=</span> ro <span class="token comment">// error!</span>
</code></pre></div><p>上面代码的最后一行，可以看到就算把整个 <code>ReadonlyArray</code> 赋值到一个普通数组也是不可以的。 但是你可以用类型断言重写：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>a <span class="token operator">=</span> ro <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="readonly-vs-const"><a href="#readonly-vs-const" class="header-anchor">#</a> readonly vs const</h3> <p>最简单判断该用 <code>readonly</code> 还是 <code>const</code> 的方法是看要把它做为变量使用还是做为一个属性。 做为变量使用的话用 <code>const</code>，若做为属性则使用 <code>readonly</code></p> <h2 id="函数类型"><a href="#函数类型" class="header-anchor">#</a> 函数类型</h2> <p>接口能够描述 <code>JavaScript</code> 中对象拥有的各种各样的外形。 除了描述带有属性的普通对象外，接口也可以描述函数类型。</p> <p>为了使用接口表示函数类型，我们需要给接口定义一个调用签名。它就像是一个只有参数列表和返回值类型的函数定义。参数列表里的每个参数都需要名字和类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SearchFunc</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>source<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> subString<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样定义后，我们可以像使用其它接口一样使用这个函数类型的接口。 下例展示了如何创建一个函数类型的变量，并将一个同类型的函数赋值给这个变量。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> mySearch<span class="token operator">:</span> SearchFunc
<span class="token function-variable function">mySearch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>source<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> subString<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>subString<span class="token punctuation">)</span>
  <span class="token keyword">return</span> result <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对于函数类型的类型检查来说，函数的参数名不需要与接口里定义的名字相匹配。 比如，我们使用下面的代码重写上面的例子：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> mySearch<span class="token operator">:</span> SearchFunc
<span class="token function-variable function">mySearch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>src<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> sub<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span>
  <span class="token keyword">return</span> result <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>函数的参数会逐个进行检查，要求对应位置上的参数类型是兼容的。 如果你不想指定类型，<code>TypeScript</code> 的类型系统会推断出参数类型，因为函数直接赋值给了 <code>SearchFunc</code> 类型变量。 函数的返回值类型是通过其返回值推断出来的（此例是 <code>false</code> 和 <code>true</code>）。 如果让这个函数返回数字或字符串，类型检查器会警告我们函数的返回值类型与 <code>SearchFunc</code> 接口中的定义不匹配。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> mySearch<span class="token operator">:</span> SearchFunc
<span class="token function-variable function">mySearch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>src<span class="token punctuation">,</span> sub<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span>
  <span class="token keyword">return</span> result <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="索引类型"><a href="#索引类型" class="header-anchor">#</a> 索引类型</h2> <p>与使用接口描述函数类型差不多，我们也可以描述那些能够“通过索引得到”的类型，可索引类型具有一个 索引签名，它描述了对象索引的类型，还有相应的索引返回值类型。</p> <ul><li>对数组和对象进行约束</li> <li><code>UserInterface</code> 表示<code>index</code>的类型是 <code>number</code>，那么值的类型必须是 <code>string</code></li> <li><code>UserInterface2</code> 表示<code>index</code>的类型是 <code>string</code>，那么值的类型必须是 <code>string</code></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">UserInterface</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr<span class="token operator">:</span> UserInterface <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'wjh1'</span><span class="token punctuation">,</span> <span class="token string">'wjh2'</span><span class="token punctuation">]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

<span class="token keyword">interface</span> <span class="token class-name">UserInterface2</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj<span class="token operator">:</span> UserInterface2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'wjh'</span> <span class="token punctuation">}</span>
</code></pre></div><p>你可以将索引签名设置为只读，这样就防止了给索引赋值</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ReadonlyStringArray</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> myArray<span class="token operator">:</span> ReadonlyStringArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">]</span>
myArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Mallory'</span> <span class="token comment">// error!</span>
</code></pre></div><h2 id="类类型"><a href="#类类型" class="header-anchor">#</a> 类类型</h2> <p>与 <code>C#</code> 或 <code>Java</code> 里接口的基本作用一样，<code>TypeScript</code> 也能够用它来明确的强制一个类去符合某种契约。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
  currentTime<span class="token operator">:</span> Date
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">implements</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
  currentTime<span class="token operator">:</span> Date
  <span class="token function">constructor</span><span class="token punctuation">(</span>h<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你也可以在接口中描述一个方法，在类里实现它，如同下面的 <code>setTime</code> 方法一样：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
  currentTime<span class="token operator">:</span> Date
  <span class="token function">setTime</span><span class="token punctuation">(</span>d<span class="token operator">:</span> Date<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">implements</span> <span class="token class-name">ClockInterface</span> <span class="token punctuation">{</span>
  currentTime<span class="token operator">:</span> Date
  <span class="token function">setTime</span><span class="token punctuation">(</span>d<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> d
  <span class="token punctuation">}</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>h<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接口描述了类的公共部分，而不是公共和私有两部分。 它不会帮你检查类是否具有某些私有成员</p> <h2 id="构造函数类型"><a href="#构造函数类型" class="header-anchor">#</a> 构造函数类型</h2> <p>在 <code>TypeScript</code> 中，我们可以用 <code>interface</code> 来描述类，同时也可以使用<code>interface</code>里特殊的<code>new()</code>关键字来描述类的构造函数类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//不加new是修饰函数的,加new是修饰类的</span>
<span class="token keyword">interface</span> <span class="token class-name">WithNameClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Animal
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">createAnimal</span><span class="token punctuation">(</span>clazz<span class="token operator">:</span> WithNameClass<span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">clazz</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">createAnimal</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</code></pre></div><h2 id="混合类型"><a href="#混合类型" class="header-anchor">#</a> 混合类型</h2> <p>一个对象可以同时做为函数和对象使用，并带有额外的属性</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
  interval<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Counter <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token function-variable function">counter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Counter
  counter<span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token number">123</span>
  counter<span class="token punctuation">.</span><span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">return</span> counter
<span class="token punctuation">}</span>

<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token function">getCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">c</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token number">5.0</span>
</code></pre></div><h2 id="接口继承类"><a href="#接口继承类" class="header-anchor">#</a> 接口继承类</h2> <p>当接口继承了一个类类型时，它会继承类的成员但不包括其实现。 就好像接口声明了所有类中存在的成员，但并没有提供具体实现一样。 接口同样会继承到类的 <code>private</code> 和 <code>protected</code> 成员。 这意味着当你创建了一个接口继承了一个拥有私有或受保护的成员的类时，这个接口类型只能被这个类或其子类所实现<code>implement</code>。</p> <p>当你有一个庞大的继承结构时这很有用，但要指出的是你的代码只在子类拥有特定属性时起作用。 这个子类除了继承至基类外与基类没有任何关系。例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Control</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> state<span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">SelectableControl</span> <span class="token keyword">extends</span> <span class="token class-name">Control</span> <span class="token punctuation">{</span>
  <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">Control</span> <span class="token keyword">implements</span> <span class="token class-name">SelectableControl</span> <span class="token punctuation">{</span>
  <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">TextBox</span> <span class="token keyword">extends</span> <span class="token class-name">Control</span> <span class="token punctuation">{</span>
  <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Error：“ImageC”类型缺少“state”属性。</span>
<span class="token keyword">class</span> <span class="token class-name">ImageC</span> <span class="token keyword">implements</span> <span class="token class-name">SelectableControl</span> <span class="token punctuation">{</span>
  <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面的例子里，<code>SelectableControl</code> 包含了 <code>Control</code> 的所有成员，包括私有成员 <code>state</code>。 因为 <code>state</code> 是私有成员，所以只能够是 <code>Control</code> 的子类们才能实现 <code>SelectableControl</code> 接口。 因为只有 <code>Control</code> 的子类才能够拥有一个声明于<code>Control</code> 的私有成员 <code>state</code>，这对私有成员的兼容性是必需的。</p> <p>在 <code>Control</code> 类内部，是允许通过 <code>SelectableControl</code> 的实例来访问私有成员 <code>state</code> 的。 实际上，<code>SelectableControl</code> 接口和拥有 <code>select</code> 方法的 <code>Control</code> 类是一样的。<code>Button</code>和 <code>TextBox</code> 类是 <code>SelectableControl</code> 的子类（因为它们都继承自<code>Control</code> 并有 <code>select</code> 方法），但 <code>ImageC</code> 类并不是这样的。</p> <h2 id="抽象类-vs-接口"><a href="#抽象类-vs-接口" class="header-anchor">#</a> 抽象类 vs 接口</h2> <ul><li>不同类之间公有的属性或方法，可以抽象成一个接口<code>（Interfaces）</code></li> <li>而抽象类是供其他类继承的基类，抽象类不允许被实例化。抽象类中的抽象方法必须在子类中被实现</li> <li>抽象类本质是一个无法被实例化的类，其中能够实现方法和初始化属性，而接口仅能够用于描述,既不提供方法的实现，也不为属性进行初始化</li> <li>一个类可以继承一个类或抽象类，但可以实现<code>（implements）</code>多个接口</li> <li>抽象类也可以实现接口</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
  <span class="token keyword">abstract</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Flying</span> <span class="token punctuation">{</span>
  <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Duck</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">Flying</span> <span class="token punctuation">{</span>
  <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'汪汪汪'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会飞'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> duck <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Duck</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">)</span>
duck<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
duck<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/27/2021, 8:55:33 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/typescript/article-4.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        类
      </a></span> <span class="next"><a href="/typescript/article-6.html">
        泛型
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4dbfa5ba.js" defer></script><script src="/assets/js/3.07e453d2.js" defer></script><script src="/assets/js/58.d60e6c11.js" defer></script>
  </body>
</html>