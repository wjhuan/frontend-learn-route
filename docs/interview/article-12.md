---
title: 3D图形学面试题
---

# 3D图形学面试题

## 什么是 WebGL？什么是 Three.js？请解释three.js中的WebGL和Canvas的区别？

1. WebGL(全写Web Graphics Library)是一种3D绘图协议，这种绘图技术标准允许把JavaScript和OpenGL ES 2.0结合在一起，通过增加OpenGL ES 2.0的一个JavaScript绑定，WebGL可以为HTML5 Canvas提供硬件3D加速渲染，这样Web开发人员就可以借助系统显卡来在浏览器里更流畅地展示3D场景和模型了，还能创建复杂的导航和数据视觉化。WebGL技术标准免去了开发网页专用渲染插件的麻烦，可被用于创建具有复杂3D结构的网站页面，甚至可以用来设计3D网页游戏等等。

2. Three.js是一款基于JavaScript可直接运行GPU驱动游戏与图形驱动应用于浏览器的WebGL引擎，其库提供的特性与API以绘制3D场景于浏览器。

3. Canvas与WebGL的区别是canvas API提供二维绘图方式，图形的绘制主要通过CanvasRenderingContext2D接口完成，通过 canvas.getContext('2d') 获取二维图像绘图上下文；而WebGL  API可以在任何兼容canvas中的渲染2d和3d图形，WebGL API 提供三维接口，图形绘制主要通过WebGLRenderingContext接口完成，通过canvas.getContext('webgl')来获取WebGL上下文。

## Three.js它有什么特点和优势？以及它为什么会被广泛使用？

Three.js提供了一系列简化的API和工具，使得创建三维图形更加容易的展现在浏览器端。其抽象了底层的复杂性，提供了简单、一致的接口。提供基本的渲染功能之外，还包括了丰富的扩展，如光照、贴图、粒子系统等，可以满足不同类型的三维图形需求。Three.js有一个活跃的社区，提供了大量的文档、教程和示例，方便开发者学习和解决问题。
随着社会的信息化的发展，在数据可视化、图形/游戏引擎、交互演示、图形渲染、地图、VR、物品展示、室内设计、城市规划等方面Web端展示3D的需求大量增多，人们迫切需求一款能打开浏览器即可使用的便捷式3D开发引擎，而基于JavaScript的WebGL引擎Threejs恰好可以满足这一要求，所以得以大规模应用。

## 什么是模型导入器(Model Loader)？Three.js中有哪些常用的模型导入器？

通常叫做模型加载器，一般用来加载外部特定格式的模型文件；常用的模型加载器有GLTFLoader GLTF模型加载器、OBJLoader OBJ模型加载器、STLLoader STL模型加载器、 FBXLoader动画模型加载器等等。

## 哪一种三维物体格式能够得到最好地支持？

推荐使用GLTF(gl传输格式)来对三维物体进行导入和导出,glTF(gl传输格式)是一种开放格式的规范 (open format specification), 用于更高效地传输、加载3D内容。该类文件以JSON(.gltf)格式或二进制（.glb）格式提供,外部文件存储贴图(.jpg、.png)和额外的二进制数据(.bin).一个glTF组件可传输一个或多个场景， 包括网格、材质、贴图、蒙皮、骨架、变形目标、动画、灯光以及摄像机等。

## 如何将three.js与WebGL结合使用？

Three.js基于WebGL构建，因此它与WebGL紧密集成。可以通过创建WebGLRenderer对象来启用WebGL渲染。此外，可以通过使用Three.js提供的各种实用工具和功能来简化WebGL的使用，如场景管理、光照、材质和动画等。

## Three.js 中的事件处理是如何工作的，如何处理用户输入？

Three.js 提供了鼠标和触摸事件监听器，你可以使用它们来捕捉用户的输入，例如点击、拖动和缩放等操作。通过事件处理，你可以实现交互性。

## 请解释 WebGL 渲染流水线（Rendering Pipeline）

WebGL 渲染流水线是一系列的步骤，用于将三维场景转化为最终的图像。这包括几何处理、光照计算、着色器执行和像素绘制等过程

## Three.js 中的性能优化技巧有哪些？

1. 合并几何体（Geometry Merge） ：如果你有多个相似的物体，可以将它们的几何体合并成一个，以减少渲染调用的数量。这可以通过 BufferGeometry 来实现。

2. 使用纹理集合（Texture Atlas） ：将多个小纹理图像合并成一个大的纹理图集，减少纹理切换和内存占用。

3. 减少光源数量：光源是渲染成本较高的因素之一。尽量减少不必要的光源，使用平行光或环境光来模拟光照效果。

4. 使用 LOD（Level of Detail） ：LOD 技术根据物体距离相机的远近，加载不同级别的细节模型。这有助于减少物体的多边形数量。

5. 开启硬件加速：确保浏览器启用了硬件加速，以充分利用 GPU 渲染。

6. 使用 Web Workers：将一些计算密集型任务放在 Web Workers 中，以防止阻塞主线程。

7. 使用 Occlusion Culling：当物体被遮挡时，不需要渲染它们。使用视锥体剔除和遮挡剔除技术来提高渲染效率。

8. 纹理压缩：使用纹理压缩格式，如 DXT、ETC 或 PVRTC，以减少纹理内存占用。

9. 事件处理的最小化：不要在每一帧都附加事件监听器，只在需要时附加。事件处理可能会引入性能开销。

10. 使用 requestAnimationFrame：使用 requestAnimationFrame 来控制渲染循环，以确保在性能允许的情况下渲染。

11. 使用外部模型格式：如果可能的话，使用 GLTF 格式的模型，因为它是 Three.js 中性能较高的模型格式。

12. 内存管理：当你不再需要物体或纹理时，记得手动释放它们的内存资源，以避免内存泄漏。

13. 渲染器设置：在创建渲染器时，选择合适的渲染器设置，如 antialiasing（抗锯齿）和 shadows（阴影），以平衡性能和图形质量。

14. 使用 GPU 功能：尽量使用 GPU 进行计算，例如使用着色器来执行复杂的渲染操作。

15. 避免频繁的渲染大小变化：频繁改变渲染画布的大小可能会导致性能下降，尽量避免这种情况。

16. 压缩和合并着色器：将着色器代码压缩和合并，以减少 HTTP 请求和提高加载速度。

17. 定期检查性能：使用浏览器的性能分析工具（例如 Chrome 的开发者工具）来检查性能瓶颈，并优化应用。

18. 控制粒子数量：如果你使用粒子系统，确保粒子数量不会过多，以避免性能下降。

19. 测试不同设备：在不同设备和浏览器上测试你的应用，以确保它在各种环境中都能正常运行。

## 当结合高德地图和Three.js创建3D地图应用时，以下是每个步骤的详细操作：

获取地理数据：
使用高德地图API进行地理数据获取，可根据需求选择合适的API接口，例如地理编码、地图服务、POI搜索等。
将API返回的地理数据保存为合适的格式，例如JSON格式，以便后续处理和使用。

地理数据转换：
如果需要将地理坐标转换为Three.js中的3D坐标，可以使用地理坐标系转换算法，将地理坐标映射到Three.js场景中的坐标系。
如果需要将地理特征转换为3D模型，可以使用地理数据和3D模型之间的映射关系，或者手动创建对应的3D模型并进行适当的缩放、旋转和定位。

创建3D场景：
使用Three.js创建一个空的3D场景，可以使用THREE.Scene()构造函数创建。
设置相机、光源等场景元素，以便后续展示地理数据。
在HTML页面中添加一个用于渲染场景的Canvas元素，并初始化Three.js渲染器。

地理数据可视化：
将获取到的地理数据转换为Three.js中的3D对象，例如点、线、面等。
将这些3D对象添加到场景中，以展示地理信息。可以使用Three.js提供的THREE.Mesh、THREE.Line等类来创建和添加3D对象。

交互功能：
实现用户与地图的交互功能，例如缩放、旋转、拖动等操作。可以监听鼠标或触摸事件，并根据用户的操作更新相机的位置和视角。
结合高德地图API提供的交互功能，例如地图缩放、平移等操作，与Three.js场景的交互功能进行结合。

性能优化：
优化地理数据的加载和处理过程，确保数据的加载和转换过程尽可能高效。
使用合适的3D模型和纹理，避免过多的渲染负载。
使用Three.js提供的性能监控工具，如Stats.js，对应用程序的性能进行监控和优化。
