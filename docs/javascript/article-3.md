---
title: 闭包作用域和浏览器垃圾回收机制
---

# 闭包作用域和浏览器垃圾回收机制

## 浏览器垃圾回收机制「GC」

1. 标记清除
2. 引用计数

> 全局上下文：打开页面，执行全局代码就会形成；只有当页面关闭的时候才会释放；
> 私有上下文：一般函数(代码块)中的代码执行完，浏览器会自动把私有上下文出栈释放；但是如果，当前上下文中，某个和它关联的内容（一般指的是一个堆内存）被当前上下文以外的事物占用了，那么这个私有上下文不能出栈释放；这样私有上下文中的`“私有变量/值”`也被保存起来了! `闭包的机制:保护、保存`

```js
let x = 5;
function fn(x) {
    return function(y) {
        console.log(y + (++x));
    }
}
let f = fn(6);
f(7);
fn(8)(9);
f(10);
console.log(x);
```

![](./img/closure1.jpg)

```js
let a=0,
    b=0;
function A(a){
    A=function(b){
        alert(a+b++);
    };
    alert(a++);
}
A(1);
A(2);
```

![](./img/closure2.jpg)