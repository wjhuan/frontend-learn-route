<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>lerna | 前端食堂</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/assets/logo.png">
    <meta name="description" content="A lightweight creator for VuePress project.">
    <link rel="preload" href="/assets/css/0.styles.a0bdfdfc.css" as="style"><link rel="preload" href="/assets/js/app.6b0d3870.js" as="script"><link rel="preload" href="/assets/js/3.a5cb75aa.js" as="script"><link rel="preload" href="/assets/js/5.3ec5209b.js" as="script"><link rel="prefetch" href="/assets/js/10.48422cdc.js"><link rel="prefetch" href="/assets/js/11.4457209d.js"><link rel="prefetch" href="/assets/js/12.2a6bcbb3.js"><link rel="prefetch" href="/assets/js/13.fea0e442.js"><link rel="prefetch" href="/assets/js/14.78e271ad.js"><link rel="prefetch" href="/assets/js/15.80863f6b.js"><link rel="prefetch" href="/assets/js/16.e1e45d55.js"><link rel="prefetch" href="/assets/js/17.748ec67f.js"><link rel="prefetch" href="/assets/js/18.11b6fc17.js"><link rel="prefetch" href="/assets/js/19.af7ca577.js"><link rel="prefetch" href="/assets/js/20.0554da4e.js"><link rel="prefetch" href="/assets/js/21.69860b07.js"><link rel="prefetch" href="/assets/js/22.175b7f6c.js"><link rel="prefetch" href="/assets/js/23.b217ac3a.js"><link rel="prefetch" href="/assets/js/24.e7b61c6c.js"><link rel="prefetch" href="/assets/js/25.562561da.js"><link rel="prefetch" href="/assets/js/26.36d601b5.js"><link rel="prefetch" href="/assets/js/27.8249b24b.js"><link rel="prefetch" href="/assets/js/28.5d16ed43.js"><link rel="prefetch" href="/assets/js/29.9997d625.js"><link rel="prefetch" href="/assets/js/30.6d5c7421.js"><link rel="prefetch" href="/assets/js/31.4658923b.js"><link rel="prefetch" href="/assets/js/32.3b279873.js"><link rel="prefetch" href="/assets/js/33.cf2b5de9.js"><link rel="prefetch" href="/assets/js/34.8503f271.js"><link rel="prefetch" href="/assets/js/35.7f05513c.js"><link rel="prefetch" href="/assets/js/36.5e69a563.js"><link rel="prefetch" href="/assets/js/37.ed22d644.js"><link rel="prefetch" href="/assets/js/38.4a406f5f.js"><link rel="prefetch" href="/assets/js/39.f9e8224e.js"><link rel="prefetch" href="/assets/js/4.72333175.js"><link rel="prefetch" href="/assets/js/40.9d5198e6.js"><link rel="prefetch" href="/assets/js/41.052669ca.js"><link rel="prefetch" href="/assets/js/42.cc63ff4a.js"><link rel="prefetch" href="/assets/js/43.9fec2d91.js"><link rel="prefetch" href="/assets/js/44.ef59aabf.js"><link rel="prefetch" href="/assets/js/45.69bedeb0.js"><link rel="prefetch" href="/assets/js/46.01227659.js"><link rel="prefetch" href="/assets/js/47.b7662bf1.js"><link rel="prefetch" href="/assets/js/48.079689fd.js"><link rel="prefetch" href="/assets/js/49.39eebc4e.js"><link rel="prefetch" href="/assets/js/50.3c1d03a3.js"><link rel="prefetch" href="/assets/js/51.5f877cd1.js"><link rel="prefetch" href="/assets/js/52.d12a0207.js"><link rel="prefetch" href="/assets/js/53.e8cf4926.js"><link rel="prefetch" href="/assets/js/54.57b76576.js"><link rel="prefetch" href="/assets/js/55.14c96737.js"><link rel="prefetch" href="/assets/js/56.523f474d.js"><link rel="prefetch" href="/assets/js/57.c64f1abe.js"><link rel="prefetch" href="/assets/js/58.381cefd1.js"><link rel="prefetch" href="/assets/js/59.27d2b623.js"><link rel="prefetch" href="/assets/js/6.18f1be11.js"><link rel="prefetch" href="/assets/js/60.4264d637.js"><link rel="prefetch" href="/assets/js/61.5a581a2d.js"><link rel="prefetch" href="/assets/js/62.56b0bca0.js"><link rel="prefetch" href="/assets/js/63.3d3c0cae.js"><link rel="prefetch" href="/assets/js/64.ccd4081c.js"><link rel="prefetch" href="/assets/js/65.f9f0eec6.js"><link rel="prefetch" href="/assets/js/66.b9ae967b.js"><link rel="prefetch" href="/assets/js/67.f5610f48.js"><link rel="prefetch" href="/assets/js/68.d9f1c646.js"><link rel="prefetch" href="/assets/js/69.22a44fd9.js"><link rel="prefetch" href="/assets/js/7.e826c943.js"><link rel="prefetch" href="/assets/js/70.bc88a09e.js"><link rel="prefetch" href="/assets/js/71.064eea43.js"><link rel="prefetch" href="/assets/js/72.280a3d03.js"><link rel="prefetch" href="/assets/js/73.01b30be4.js"><link rel="prefetch" href="/assets/js/74.08e19a9b.js"><link rel="prefetch" href="/assets/js/75.d61f7a90.js"><link rel="prefetch" href="/assets/js/76.a1caa3f8.js"><link rel="prefetch" href="/assets/js/77.1cccf5e0.js"><link rel="prefetch" href="/assets/js/8.10ced548.js"><link rel="prefetch" href="/assets/js/9.0f994d29.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0d6d3bd4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a0bdfdfc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">前端食堂</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><a class="ant-dropdown-link ant-dropdown-trigger">
      Hover me <i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></a> <a href="https://github.com/wjhuan/frontend-learn-route" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/web-arch/" aria-current="page" title="README.md" class="sidebar-link">README.md</a></li><li><a href="/web-arch/article-1.html" title="前端架构课需求分析" class="sidebar-link">前端架构课需求分析</a></li><li><a href="/web-arch/article-2.html" title="脚手架" class="sidebar-link">脚手架</a></li><li><a href="/web-arch/article-3.html" aria-current="page" title="lerna" class="active sidebar-link">lerna</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#lerna-介绍" title="lerna 介绍" class="sidebar-link">lerna 介绍</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#简历编写" title="简历编写" class="sidebar-link">简历编写</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#大厂项目开发流程" title="大厂项目开发流程" class="sidebar-link">大厂项目开发流程</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#项目痛点分析" title="项目痛点分析" class="sidebar-link">项目痛点分析</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#需求分析" title="需求分析" class="sidebar-link">需求分析</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#git-操作规范" title="git 操作规范" class="sidebar-link">git 操作规范</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#脚手架拆包策略" title="脚手架拆包策略" class="sidebar-link">脚手架拆包策略</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#core-模块技术方案" title="core 模块技术方案" class="sidebar-link">core 模块技术方案</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#脚手架命令动态加载设计" title="脚手架命令动态加载设计" class="sidebar-link">脚手架命令动态加载设计</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#node-多进程" title="node 多进程" class="sidebar-link">node 多进程</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#脚手架项目创建功能架构设计" title="脚手架项目创建功能架构设计" class="sidebar-link">脚手架项目创建功能架构设计</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#脚手架发布功能设计" title="脚手架发布功能设计" class="sidebar-link">脚手架发布功能设计</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#git-flow-流程" title="git flow 流程" class="sidebar-link">git flow 流程</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#整体发布流程细节架构图" title="整体发布流程细节架构图" class="sidebar-link">整体发布流程细节架构图</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#git-实例" title="git 实例" class="sidebar-link">git 实例</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#git-flow-version-生成逻辑" title="git flow version 生成逻辑" class="sidebar-link">git flow version 生成逻辑</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#git-flow-本地代码提交" title="git flow 本地代码提交" class="sidebar-link">git flow 本地代码提交</a></li><li class="sidebar-sub-header"><a href="/web-arch/article-3.html#云构建架构设计" title="云构建架构设计" class="sidebar-link">云构建架构设计</a></li></ul></li><li><a href="/web-arch/article-4.html" title="前端监控体系搭建" class="sidebar-link">前端监控体系搭建</a></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="lerna"><a href="#lerna" class="header-anchor">#</a> lerna</h1> <h2 id="lerna-介绍"><a href="#lerna-介绍" class="header-anchor">#</a> lerna 介绍</h2> <blockquote><p>Lerna 是一个优化基于 git+npm 的多 package 项目的管理工具
Lerna 是架构优化的产物，它揭示了一个架构真理: 项目复杂度提升后，就需要对项目进行架构优化。架构优化的主要目标往往都是以效能为核心。</p></blockquote> <ol><li>大幅减少重复操作</li> <li>提升操作的标准化</li></ol> <p><img src="/assets/img/8.c1656bf5.png" alt=""> <img src="/assets/img/9.671bf418.png" alt=""></p> <h2 id="简历编写"><a href="#简历编写" class="header-anchor">#</a> 简历编写</h2> <ul><li>熟悉 Yargs 脚手架开发框架</li> <li>熟悉多 Package 管理工具 Lerna 的使用方法和实现原理</li> <li>深入了解 Node.is 模块路径解析流程</li></ul> <h3 id="面试官问起细节后如何回答"><a href="#面试官问起细节后如何回答" class="header-anchor">#</a> 面试官问起细节后如何回答?</h3> <p>yargs 相关问题</p> <ol><li>脚手架构成</li></ol> <ul><li>bin: package.json 中配置 bin 属性，npm link 本地安装</li> <li>command: 命令</li> <li>options: 参数(boolean/string/number)</li> <li>文件顶部增加 #!/usr/bin/env node</li></ul> <ol start="2"><li>脚手架初始化流程</li></ol> <ul><li>构造函数 Yargs()</li> <li>常用方法
<ul><li>Yargs.options</li> <li>Yargs.option</li> <li>Yargs.group</li> <li>Yargs.demandCommand</li> <li>Yargs.recommendCommands</li> <li>Yargs.strict</li> <li>Yargs.fail</li> <li>Yargs.alias</li> <li>Yargs.wrap</li> <li>Yargs.epilogue</li></ul></li></ul> <ol start="3"><li>脚手架参数解析方法</li></ol> <ul><li>hideBin(process.argv)</li> <li>Yargs.parse(argv, options)</li></ul> <ol start="4"><li>命令注册方法</li></ol> <ul><li>Yargs.command(command, describe, builder, handler)</li> <li>Yargs.command({ command, describe, builder, handler })</li></ul> <p>lerna 相关问题</p> <ol><li><code>Lerna</code> 是基于 <code>git+npm</code> 的多<code>package</code>项目管理工具</li> <li>实现原理</li></ol> <ul><li>通过 <code>import-local</code> 优先调用本地 <code>lerna</code> 命令</li> <li>通过 <code>Yargs</code> 生成脚手架，先注册全局属性，再注册命令，最后通过 <code>parse</code> 方法解析参数</li> <li><code>lerna</code> 命令注册时需要传入 <code>builder</code> 和 <code>handler</code> 两个方法，<code>builder</code> 方法用于注册命令专属的 <code>options</code>，<code>handler</code> 用来处理命令的业务逻辑</li> <li><code>lerna</code> 通过配置 <code>npm</code>本地依赖的方式来进行本地开发，具体写法是在 <code>package,json</code> 的依赖中写入: <code>file:your-local-module-path</code> ，在<code>lerna publish</code> 时会自动将该路径替换</li></ul> <p>Node.js 模块路径解析流程</p> <ol><li><code>Node.is</code> 项目模块路径解析是通过 <code>require.resolve</code>方法来实现的</li> <li><code>require.resolve</code> 就是通过 <code>Module.resolveFileName</code> 方法实现的</li> <li><code>require.resolve</code>实现原理</li></ol> <ul><li><p><code>Module.resolveFileName</code>方法核心流程有 3 点</p> <ul><li>判断是否为内置模块</li> <li>通过 <code>Module.resolveLookupPaths</code> 方法生成 <code>node modules</code> 可能存在的路径</li> <li>通过 <code>Module.findPath</code> 查询模块的真实路径</li></ul></li> <li><p><code>Module.findPath</code>核心流程有 4 点</p> <ul><li>查询缓存 (将 <code>request</code> 和 <code>paths</code> 通过 <code>\x00</code> 合并成 <code>cacheKey</code>)</li> <li>遍历 <code>paths</code>，将 <code>path</code> 与 <code>request</code> 组成文件路径 <code>basePath</code></li> <li>如果 <code>basePath</code> 存在则调用 <code>fs.realPathSync</code> 获取文件真实路径</li> <li>将文件真实路径缓存到 <code>Module._pathCache</code>(<code>key</code> 就是前面生成的 <code>cacheKey</code>)</li></ul></li> <li><p><code>fs.realPathSync</code> 核心流程有 3 点</p> <ul><li>查询缓存 (缓存的 <code>key</code> 为 <code>p</code>，即 <code>Module.findPath</code> 中生成的文件路径)</li> <li>从左往右遍历路径字符串，查询到 <code>/</code> 时，拆分路径，判断该路径是否为软链接，如果是软链接则查询真实链接，并生成新路径 p，然后继续往后遍历，这里有 <code>1</code> 个细节需要特别注意:
<ul><li>遍历过程中生成的子路径 <code>base</code> 会缓存在 <code>knownHard 和 cache</code>中，避免重复查询</li></ul></li> <li>遍历完成得到模块对应的真实路径，此时会将原始路径 <code>original</code>作为<code>key</code>，真实路径作为 <code>value</code>，保存到缓存中</li></ul></li> <li><p><code>require.resolve.paths</code> 等价于 <code>Module.resolveLookupPaths</code>，该方法用于获取所有 <code>node modules</code>
可能存在的路径</p></li> <li><p><code>require.resolve.paths</code> 实现原理</p> <ul><li>如果路径为 <code>/ (根目录)</code> ，直接返回 <code>[/node modules]</code></li> <li>否则，将路径字符串从后往前遍历，查询到 <code>/</code> 时，拆分路径，在后面加上 <code>node modules</code>，并传入一个 <code>paths</code> 数组，直至查询不到 <code>/</code> 后返 <code>paths</code> 数组</li></ul></li></ul> <h2 id="大厂项目开发流程"><a href="#大厂项目开发流程" class="header-anchor">#</a> 大厂项目开发流程</h2> <p><img src="/assets/img/10.e9ca0908.png" alt=""> <img src="/assets/img/11.2f675b30.png" alt=""></p> <h2 id="项目痛点分析"><a href="#项目痛点分析" class="header-anchor">#</a> 项目痛点分析</h2> <ul><li>创建项目/组件时，存在大量重复代码拷贝: 快速复用已有沉淀</li> <li>协同开发时，由于 git 操作不规范，导致分支混乱，操作耗时: 制定标准的 gt 操作规范并集成到脚手架</li> <li>发布上线耗时，而且容易出现各种错误: 制定标准的上线流程和规范并集成到脚手架</li></ul> <h2 id="需求分析"><a href="#需求分析" class="header-anchor">#</a> 需求分析</h2> <ol><li>通用的研发脚手架</li> <li>通用的项目/组件创建能力
<ul><li>模板支持定制，定制后能够发布生效</li> <li>模板支持快速接入，极低的接入成本</li></ul></li> <li>通用的项目/组件发布能力
<ul><li>发布过程自动完成标准的 git 操作</li> <li>发布成功后自动删除开发分支并创建 tag</li> <li>发布后自动完成云构建、CDN、域名绑定</li> <li>发布过程支持测试/正式两种模式</li></ul></li></ol> <h2 id="git-操作规范"><a href="#git-操作规范" class="header-anchor">#</a> git 操作规范</h2> <p><img src="/assets/img/12.969bb8e6.png" alt=""> <img src="/assets/img/13.c9857a43.png" alt=""></p> <h2 id="脚手架拆包策略"><a href="#脚手架拆包策略" class="header-anchor">#</a> 脚手架拆包策略</h2> <ul><li>核心流程 core</li> <li>命令 commands
<ul><li>初始化</li> <li>发布</li> <li>清除缓存</li></ul></li> <li>模型层 models
<ul><li>command 命令</li> <li>project 项目</li> <li>component 组件</li> <li>npm 模块</li> <li>git 仓库</li></ul></li> <li>支撑模块 utils
<ul><li>git 操作</li> <li>云构建</li> <li>工具方法</li> <li>api 请求</li> <li>git api</li></ul></li></ul> <h2 id="core-模块技术方案"><a href="#core-模块技术方案" class="header-anchor">#</a> core 模块技术方案</h2> <h3 id="命令执行流程"><a href="#命令执行流程" class="header-anchor">#</a> 命令执行流程</h3> <ul><li><p>准备阶段
<img src="/assets/img/14.46f8890c.png" alt=""></p></li> <li><p>命令注册</p></li> <li><p>命令执行</p></li> <li><p>架构优化</p></li></ul> <p><img src="/assets/img/15.eafda015.png" alt=""></p> <h2 id="脚手架命令动态加载设计"><a href="#脚手架命令动态加载设计" class="header-anchor">#</a> 脚手架命令动态加载设计</h2> <p><img src="/assets/img/16.54413117.png" alt=""></p> <h2 id="node-多进程"><a href="#node-多进程" class="header-anchor">#</a> node 多进程</h2> <h3 id="什么是进程"><a href="#什么是进程" class="header-anchor">#</a> 什么是进程</h3> <blockquote><p>进程 (Process) 是计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位，是操作系统结构的基础。</p></blockquote> <p>进程的概念主要有两点:</p> <ol><li>第一，进程是一个实体。每一个进程都有它自己的地址空间。</li> <li>第二，进程是一个“执行中的程序”，存在嵌套关系。</li></ol> <p><img src="/assets/img/17.23939f53.png" alt=""></p> <p>我们在 child_process 中创建的进程就是 Node.js 的子进程</p> <h2 id="脚手架项目创建功能架构设计"><a href="#脚手架项目创建功能架构设计" class="header-anchor">#</a> 脚手架项目创建功能架构设计</h2> <h3 id="架构背后的思考"><a href="#架构背后的思考" class="header-anchor">#</a> 架构背后的思考</h3> <ol><li>可扩展: 能够快速复用到不同团队，适用不同团队之间的差异</li> <li>低成本: 在不改动脚手架源码的情况下，新增模板，且新增模板的成本很低</li> <li>高性能: 控制存储空间，安装时充分利用 Node 多进程提升安装性能</li></ol> <h3 id="架构设计图"><a href="#架构设计图" class="header-anchor">#</a> 架构设计图</h3> <p>脚手架项目创建功能架构设计图:
<img src="/assets/img/18.80e962e5.png" alt=""> <img src="/assets/img/19.f6d7370e.png" alt=""> <img src="/assets/img/20.3eee05bf.png" alt=""></p> <h2 id="脚手架发布功能设计"><a href="#脚手架发布功能设计" class="header-anchor">#</a> 脚手架发布功能设计</h2> <p><img src="/assets/img/35.6d461cd4.png" alt=""> <img src="/assets/img/36.f2509335.png" alt=""></p> <h3 id="发布功能架构图"><a href="#发布功能架构图" class="header-anchor">#</a> 发布功能架构图</h3> <p><img src="/assets/img/37.e8252216.png" alt=""></p> <h2 id="git-flow-流程"><a href="#git-flow-流程" class="header-anchor">#</a> git flow 流程</h2> <h3 id="单人开发流程"><a href="#单人开发流程" class="header-anchor">#</a> 单人开发流程</h3> <p><img src="/assets/img/38.55dd84ff.png" alt=""></p> <h3 id="多人协作流程"><a href="#多人协作流程" class="header-anchor">#</a> 多人协作流程</h3> <p><img src="/assets/img/39.f56ec311.png" alt=""></p> <h2 id="整体发布流程细节架构图"><a href="#整体发布流程细节架构图" class="header-anchor">#</a> 整体发布流程细节架构图</h2> <p><img src="/assets/img/40.ff7b58d1.png" alt=""> <img src="/assets/img/43.7fddc7bb.png" alt=""> <img src="/assets/img/44.394d0915.png" alt=""> <img src="/assets/img/41.c534a73f.png" alt=""></p> <h2 id="git-实例"><a href="#git-实例" class="header-anchor">#</a> git 实例</h2> <p><img src="/assets/img/45.c2afca64.png" alt=""></p> <h2 id="git-flow-version-生成逻辑"><a href="#git-flow-version-生成逻辑" class="header-anchor">#</a> git flow version 生成逻辑</h2> <p><img src="/assets/img/46.96a5c579.png" alt=""></p> <h2 id="git-flow-本地代码提交"><a href="#git-flow-本地代码提交" class="header-anchor">#</a> git flow 本地代码提交</h2> <p><img src="/assets/img/47.2e5940b0.png" alt=""></p> <h2 id="云构建架构设计"><a href="#云构建架构设计" class="header-anchor">#</a> 云构建架构设计</h2> <h3 id="为什么需要云构建"><a href="#为什么需要云构建" class="header-anchor">#</a> 为什么需要云构建</h3> <ol><li><p>减少发布过程中的重复劳动</p> <ul><li>打包构建</li> <li>上传静态资源服务器</li> <li>上传 CDN</li></ul></li> <li><p>避免不同环境间造成的差异，保证依赖版本的一致性</p></li> <li><p>提升构建性能</p></li> <li><p>对构建过程进行统一管控</p> <ul><li>发布前代码统一规则检查</li> <li>封网日统一发布卡口</li></ul></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/25/2023, 3:43:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/web-arch/article-2.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        脚手架
      </a></span> <span class="next"><a href="/web-arch/article-4.html">
        前端监控体系搭建
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6b0d3870.js" defer></script><script src="/assets/js/3.a5cb75aa.js" defer></script><script src="/assets/js/5.3ec5209b.js" defer></script>
  </body>
</html>