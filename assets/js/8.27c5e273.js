(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{670:function(t,s,a){t.exports=a.p+"assets/img/TCP.572872b8.png"},671:function(t,s,a){t.exports=a.p+"assets/img/net.7ce66d7c.png"},672:function(t,s,a){t.exports=a.p+"assets/img/https.a54fd2d8.png"},673:function(t,s,a){t.exports=a.p+"assets/img/middle.716336e0.jpeg"},674:function(t,s,a){t.exports=a.p+"assets/img/https-error.76783f0e.png"},675:function(t,s,a){t.exports=a.p+"assets/img/ws.331a5dfa.png"},676:function(t,s,a){t.exports=a.p+"assets/img/loop.69486292.png"},781:function(t,s,a){"use strict";a.r(s);var e=a(74),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"网络面试题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络面试题"}},[t._v("#")]),t._v(" 网络面试题")]),t._v(" "),s("h2",{attrs:{id:"tcp三次握手和四次挥手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tcp三次握手和四次挥手"}},[t._v("#")]),t._v(" TCP三次握手和四次挥手")]),t._v(" "),s("h3",{attrs:{id:"三次握手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三次握手"}},[t._v("#")]),t._v(" 三次握手")]),t._v(" "),s("p",[t._v("三次握手，即建立一次 TCP 连接时，客户端和服务端总共需要发送 3 个包。")]),t._v(" "),s("p",[t._v("先举一个例子。还是你要派人去张三家取一个东西，现在你要发短信（不是打电话）“建立连接”，至少需要 3 个步骤，缺一不可。")]),t._v(" "),s("ul",[s("li",[t._v("你：在家吗？")]),t._v(" "),s("li",[t._v("张三：在家")]),t._v(" "),s("li",[t._v("你：好，这就过去（然后你指派人上门，张三准备迎接）")])]),t._v(" "),s("p",[t._v("过程")]),t._v(" "),s("ul",[s("li",[t._v("客户端发包，服务端收到。服务端确认：客户端的发送能力是正常的。")]),t._v(" "),s("li",[t._v("服务端发包，客户端收到。客户端确认：服务端的接收能力是正常的。")]),t._v(" "),s("li",[t._v("客户端发包，服务端收到。服务端确认：客户端即将给我发送数据，我要准备接收。")])]),t._v(" "),s("p",[t._v("建立连接完成，然后就开始发送数据，通讯。")]),t._v(" "),s("h3",{attrs:{id:"四次挥手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四次挥手"}},[t._v("#")]),t._v(" 四次挥手")]),t._v(" "),s("p",[t._v("握手，是建立连接。挥手，就是告别，就是关闭连接。")]),t._v(" "),s("p",[t._v("还是之前的例子。取东西，不一定一次就取完，可能要来回很多次。而且，也不一定全部由你主动发起，过程中张三也可能会主动派人给你发送。"),s("br"),t._v("\n即，你在 chrome 中看到的是一次 http 请求，其实背后可能需要好几次网络传输，只不过浏览器给合并起来了。")]),t._v(" "),s("p",[t._v("好了，取东西完毕了，你要发短信“关闭连接”，告诉张三可以关门了，需要 4 个步骤。"),s("br"),t._v("\n【注意】这里你需要等着确认张三关门，才算是完全关闭连接，不能你说一声就不管了。跟日常生活不一样。")]),t._v(" "),s("ul",[s("li",[t._v("你：完事儿了")]),t._v(" "),s("li",[t._v("张三：好的 （此时可能还要继续给你发送，你也得继续接收。直到张三发送完）")]),t._v(" "),s("li",[t._v("张三：我发送完毕，准备关门了")]),t._v(" "),s("li",[t._v("你：好，关门吧 （然后你可以走了，张三可以关门了，连接结束）")])]),t._v(" "),s("p",[t._v("过程")]),t._v(" "),s("ul",[s("li",[t._v("客户端发包，服务端接收。服务端确认：客户端已经请求结束")]),t._v(" "),s("li",[t._v("服务端发包，客户端接收。客户端确认：服务端已经收到，我等待它关闭")]),t._v(" "),s("li",[t._v("服务端发包：客户端接受。客户端确认：服务端已经发送完成，可以关闭")]),t._v(" "),s("li",[t._v("客户端发包，服务端接收。服务端确认：可以关闭了")])]),t._v(" "),s("h3",{attrs:{id:"图示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图示"}},[t._v("#")]),t._v(" 图示")]),t._v(" "),s("p",[s("img",{attrs:{src:a(670),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"http-和-udp-有何区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-和-udp-有何区别"}},[t._v("#")]),t._v(" HTTP 和 UDP 有何区别")]),t._v(" "),s("h3",{attrs:{id:"网络协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络协议"}},[t._v("#")]),t._v(" 网络协议")]),t._v(" "),s("p",[s("img",{attrs:{src:a(671),alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("HTTP 在应用层，直接被程序使用")]),t._v(" "),s("li",[t._v("TCP 和 UDP 在传输层，底层")])]),t._v(" "),s("h3",{attrs:{id:"udp-的特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#udp-的特点"}},[t._v("#")]),t._v(" UDP 的特点")]),t._v(" "),s("p",[t._v("UDP 是一种无连接的、不可靠的传输层协议。而 TCP 需要连接、断开连接，参考“三次握手、四次挥手”。")]),t._v(" "),s("p",[t._v("不需要连接，所以 UDP 的效率比 TCP 高。")]),t._v(" "),s("p",[t._v("虽然 UDP 从协议层是不稳定的，但随着现代网络硬件环境的提升，也能保证绝大部分情况下的稳定性。所以，UDP 一直处于被发展的趋势。")]),t._v(" "),s("p",[t._v("例如视频会议、语音通话这些允许中段、不完全保证持续连接的场景，又需要较高的传输效率，就很适合 UDP 协议。")]),t._v(" "),s("h3",{attrs:{id:"答案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#答案"}},[t._v("#")]),t._v(" 答案")]),t._v(" "),s("ul",[s("li",[t._v("HTTP 在应用层，而 UDP 和 TCP 在传输层")]),t._v(" "),s("li",[t._v("HTTP 是有连接的、可靠的，UDP 是无连接的、不可靠的")])]),t._v(" "),s("h2",{attrs:{id:"连环问-http-1-0-1-1-2-0-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#连环问-http-1-0-1-1-2-0-区别"}},[t._v("#")]),t._v(" 连环问：http 1.0 1.1 2.0 区别")]),t._v(" "),s("p",[t._v("http 1.0 最基础的 http 协议")]),t._v(" "),s("p",[t._v("http 1.1")]),t._v(" "),s("ul",[s("li",[t._v("引入更多的缓存策略，如 "),s("code",[t._v("cache-control")]),t._v(" "),s("code",[t._v("E-tag")])]),t._v(" "),s("li",[t._v("长链接，默认开启 "),s("code",[t._v("Connection: keep-alive")]),t._v(" ，多次 http 请求减少了 TCP 连接次数")]),t._v(" "),s("li",[t._v("断点续传，状态吗 "),s("code",[t._v("206")])]),t._v(" "),s("li",[t._v("增加新的 method "),s("code",[t._v("PUT")]),t._v(" "),s("code",[t._v("DELETE")]),t._v(" 等，可以设计 Restful API")])]),t._v(" "),s("p",[t._v("http2.0")]),t._v(" "),s("ul",[s("li",[t._v("header 压缩，以减少体积")]),t._v(" "),s("li",[t._v("多路复用，一个 TCP 连接中可以多个 http 并行请求。拼接资源（如雪碧图、多 js 拼接一个）将变的多余")]),t._v(" "),s("li",[t._v("服务器端推送")])]),t._v(" "),s("h2",{attrs:{id:"什么是-https-中间人攻击-如何预防"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是-https-中间人攻击-如何预防"}},[t._v("#")]),t._v(" 什么是 https 中间人攻击，如何预防？")]),t._v(" "),s("h3",{attrs:{id:"https-加密原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#https-加密原理"}},[t._v("#")]),t._v(" https 加密原理")]),t._v(" "),s("p",[t._v("http 是明文传输，传输的所有内容（如登录的用户名和密码），都会被中间的代理商（无论合法还是非法）获取到。")]),t._v(" "),s("p",[t._v("http + TLS/SSL = https ，即加密传输信息。只有客户端和服务端可以解密为明文，中间的过程无法解密。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(672),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"中间人攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中间人攻击"}},[t._v("#")]),t._v(" 中间人攻击")]),t._v(" "),s("p",[t._v("中间人攻击，就是黑客劫持网络请求，伪造 CA 证书。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(673),alt:""}})]),t._v(" "),s("p",[t._v("解决方案：使用浏览器可识别的，正规厂商的证书（如阿里云），慎用免费证书。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(674),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"websocket-和-http-协议有何区别-有和应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocket-和-http-协议有何区别-有和应用场景"}},[t._v("#")]),t._v(" webSocket 和 http 协议有何区别？有和应用场景？")]),t._v(" "),s("h3",{attrs:{id:"websocket-简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocket-简介"}},[t._v("#")]),t._v(" webSocket 简介")]),t._v(" "),s("p",[t._v("webSocket 和 http 都是应用层，支持端对端的通讯。可以由服务端发起，也可以由客户端发起。"),s("br")]),t._v(" "),s("p",[t._v("场景：消息通知，直播讨论区，聊天室，协同编辑")]),t._v(" "),s("h3",{attrs:{id:"websocket-建立连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocket-建立连接"}},[t._v("#")]),t._v(" webSocket 建立连接")]),t._v(" "),s("p",[t._v("会先发起一个 http 请求，根服务端建立连接。连接成功之后再升级为 webSocket 协议，然后再通讯。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(675),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"websocket-和-http-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#websocket-和-http-区别"}},[t._v("#")]),t._v(" webSocket 和 http 区别")]),t._v(" "),s("ul",[s("li",[t._v("协议名称不同 "),s("code",[t._v("ws")]),t._v(" 和 "),s("code",[t._v("http")])]),t._v(" "),s("li",[t._v("http 一般只能浏览器发起请求，webSocket 可以双端发起请求")]),t._v(" "),s("li",[t._v("webSocket 无跨域限制")]),t._v(" "),s("li",[t._v("webSocket 通过 "),s("code",[t._v("send")]),t._v(" 和 "),s("code",[t._v("onmessage")]),t._v(" 进行通讯，http 通过 "),s("code",[t._v("req")]),t._v(" 和 "),s("code",[t._v("res")]),t._v(" 通讯")])]),t._v(" "),s("p",[t._v("PS："),s("code",[t._v("ws")]),t._v(" 可以升级为 "),s("code",[t._v("wss")]),t._v(" 协议，像 "),s("code",[t._v("http")]),t._v(" 升级到 "),s("code",[t._v("https")]),t._v(" 一样，增加 "),s("code",[t._v("SSL")]),t._v(" 安全协议。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createServer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" readFileSync "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" WebSocketServer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("cert")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/path/to/cert.pem'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/path/to/key.pem'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" wss "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebSocketServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"扩展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扩展"}},[t._v("#")]),t._v(" 扩展")]),t._v(" "),s("p",[t._v("PS：如果做项目开发，推荐使用 "),s("a",{attrs:{href:"https://www.npmjs.com/package/socket.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("socket.io"),s("OutboundLink")],1),t._v("，API 更方便。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// emit an event to the socket")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* … */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// emit an event to all connected sockets")]),t._v("\n  io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'broadcast'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* … */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// listen to the event")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reply'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* … */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"连环问-websocket-和长轮询-长连接-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#连环问-websocket-和长轮询-长连接-的区别"}},[t._v("#")]),t._v(" 连环问：webSocket 和长轮询（长连接）的区别")]),t._v(" "),s("ul",[s("li",[t._v("http 长轮询 - 客户端发起 http 请求，server 不立即返回，等待有结果再返回。这期间 TCP 连接不会关闭，阻塞式。（需要处理 timeout 的情况）")]),t._v(" "),s("li",[t._v("webSocket - 客户端发起请求，服务端接收，连接关闭。服务端发起请求，客户端接收，连接关闭。非阻塞。")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(676),alt:""}})])])}),[],!1,null,null,null);s.default=r.exports}}]);