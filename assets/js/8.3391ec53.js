(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{814:function(v,_,t){v.exports=t.p+"assets/img/21.2323bd5b.png"},815:function(v,_,t){v.exports=t.p+"assets/img/22.151f2f73.png"},816:function(v,_,t){v.exports=t.p+"assets/img/23.57250bdf.png"},817:function(v,_,t){v.exports=t.p+"assets/img/24.18b5cab3.png"},818:function(v,_,t){v.exports=t.p+"assets/img/25.cc72598d.png"},819:function(v,_,t){v.exports=t.p+"assets/img/26.91e0fc89.png"},820:function(v,_,t){v.exports=t.p+"assets/img/27.083098ff.png"},821:function(v,_,t){v.exports=t.p+"assets/img/28.5b41ae4c.png"},822:function(v,_,t){v.exports=t.p+"assets/img/29.fbfaefa0.png"},823:function(v,_,t){v.exports=t.p+"assets/img/30.bb126317.png"},824:function(v,_,t){v.exports=t.p+"assets/img/31.aaec4ebd.png"},825:function(v,_,t){v.exports=t.p+"assets/img/32.0265f78f.png"},826:function(v,_,t){v.exports=t.p+"assets/img/33.3b09f65d.png"},827:function(v,_,t){v.exports=t.p+"assets/img/34.0172fd37.png"},903:function(v,_,t){"use strict";t.r(_);var s=t(74),e=Object(s.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"前端监控体系搭建"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前端监控体系搭建"}},[v._v("#")]),v._v(" 前端监控体系搭建")]),v._v(" "),_("h2",{attrs:{id:"前端监控应用场景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前端监控应用场景"}},[v._v("#")]),v._v(" 前端监控应用场景")]),v._v(" "),_("ol",[_("li",[v._v("为什么需要前端监控?\n"),_("blockquote",[_("p",[v._v("pv：页面访问量，即 PageView，用户每次对网站的访问均被记录，用户对同一页面的多次访问，访问量累计，具体是指网站的是页面浏览量或者点击量。\nuv：即 UniqueVisitor，独立访客数，指访问某个站点或点击某个网页的不同 IP 地址的人数，访问网站的一台电脑客户端为一个访客。")])]),v._v(" "),_("ul",[_("li",[v._v("页面的访问行为，PV、UV、IP、PV 点击率、UV 点击率、停留时长")]),v._v(" "),_("li",[v._v("用户的操作行为，模块曝光、模块点击")]),v._v(" "),_("li",[v._v("页面的性能，首屏渲染时间、API 请求时间")]),v._v(" "),_("li",[v._v("异常的监控，JS Error、API 异常、业务异常")])])]),v._v(" "),_("li",[v._v("常见应用场景？\n"),_("ul",[_("li",[v._v("流量分析")]),v._v(" "),_("li",[v._v("行为分析")]),v._v(" "),_("li",[v._v("性能监控")]),v._v(" "),_("li",[v._v("错误监控")])])]),v._v(" "),_("li",[v._v("常见的前端监控平台有哪些?\n"),_("ul",[_("li",[v._v("百度统计")]),v._v(" "),_("li",[v._v("阿里云 arms")]),v._v(" "),_("li",[v._v("友盟")])])]),v._v(" "),_("li",[v._v("为什么要选择自建前端监控平台?\n"),_("ul",[_("li",[v._v("如果你的需求主要是流量分析，建议直接使用百度统计或阿里云 ARMS")]),v._v(" "),_("li",[v._v("如果你的需求不仅仅需要做流量分析，还要做行为分析，那么可以考虑自建\n"),_("ul",[_("li",[v._v("自建成本较高（人力成本） ，优势是数据掌握自己手里")]),v._v(" "),_("li",[v._v("现成成本也有一定成本 (向平台付费) ，数据是获取不到")])])]),v._v(" "),_("li",[v._v("希望数据能够储备在自己的数据库里，希望扩展更多的分析维度和能力时，需要自建")])])])]),v._v(" "),_("h2",{attrs:{id:"前端监控平台分层"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前端监控平台分层"}},[v._v("#")]),v._v(" 前端监控平台分层")]),v._v(" "),_("ol",[_("li",[v._v("前端监控 jssdk\n"),_("ul",[_("li",[v._v("采集")]),v._v(" "),_("li",[v._v("上报\n"),_("ul",[_("li",[v._v("默认上报：页面 pv，性能")]),v._v(" "),_("li",[v._v("手动上报：页面操作行为")])])])])]),v._v(" "),_("li",[v._v("前端监控 API 和大数据仓库")])]),v._v(" "),_("ul",[_("li",[v._v("接收上报的数据")]),v._v(" "),_("li",[v._v("数据仓库: MaxCompute\n"),_("ul",[_("li",[v._v("数据存贮")]),v._v(" "),_("li",[v._v("数据查询")])])])]),v._v(" "),_("ol",{attrs:{start:"3"}},[_("li",[v._v("前端监控数据可视化\n"),_("ul",[_("li",[v._v("日志大数据清洗")]),v._v(" "),_("li",[v._v("大数据回流 RDS(非结构化数据=>结构化数据)")])])])]),v._v(" "),_("h2",{attrs:{id:"监控平台架构图"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#监控平台架构图"}},[v._v("#")]),v._v(" 监控平台架构图")]),v._v(" "),_("p",[_("img",{attrs:{src:t(814),alt:""}})]),v._v(" "),_("h2",{attrs:{id:"浏览器的-5-种-observer"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的-5-种-observer"}},[v._v("#")]),v._v(" 浏览器的 5 种 Observer")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("MutationObserver")]),v._v(" "),_("blockquote",[_("p",[v._v("MutationObserver: 监听 DOM 树的变化 (属性、子节点的增删改)")])])]),v._v(" "),_("li",[_("p",[v._v("IntersectionObserver")]),v._v(" "),_("blockquote",[_("p",[v._v("IntersectionObserver: 监听一个元素和可视区域相交部分的比例，然后在可视比例达到某个闯值的时候触发回调")])])]),v._v(" "),_("li",[_("p",[v._v("PerformanceObserver")]),v._v(" "),_("blockquote",[_("p",[v._v("PerformanceObserver: 用于监测性能度量事件，在浏览器的性能时间轴记录下一个新的 Performance entries 的时候将会被通知")])])]),v._v(" "),_("li",[_("p",[v._v("ResizeObserver")]),v._v(" "),_("blockquote",[_("p",[v._v("ResizeObserver: 接口可以监听到 DOM 的变化 (节点的出现和隐藏，节点大小的变化)")])])]),v._v(" "),_("li",[_("p",[v._v("ReportingObserver")]),v._v(" "),_("blockquote",[_("p",[v._v("ReportingObserver: 监听过时的 api、浏览器的一些干预行为的报告")])])])]),v._v(" "),_("h2",{attrs:{id:"监控平台优化架构图"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#监控平台优化架构图"}},[v._v("#")]),v._v(" 监控平台优化架构图")]),v._v(" "),_("p",[_("img",{attrs:{src:t(815),alt:""}})]),v._v(" "),_("h2",{attrs:{id:"数据上报性能瓶颈"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#数据上报性能瓶颈"}},[v._v("#")]),v._v(" 数据上报性能瓶颈")]),v._v(" "),_("p",[_("img",{attrs:{src:t(816),alt:""}}),v._v(" "),_("img",{attrs:{src:t(817),alt:""}})]),v._v(" "),_("h2",{attrs:{id:"流量指标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#流量指标"}},[v._v("#")]),v._v(" 流量指标")]),v._v(" "),_("p",[_("img",{attrs:{src:t(818),alt:""}}),v._v(" "),_("img",{attrs:{src:t(819),alt:""}})]),v._v(" "),_("h2",{attrs:{id:"模块的访问行为"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#模块的访问行为"}},[v._v("#")]),v._v(" 模块的访问行为")]),v._v(" "),_("p",[_("img",{attrs:{src:t(820),alt:""}})]),v._v(" "),_("h2",{attrs:{id:"页面的性能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#页面的性能"}},[v._v("#")]),v._v(" 页面的性能")]),v._v(" "),_("p",[_("img",{attrs:{src:t(821),alt:""}})]),v._v(" "),_("h2",{attrs:{id:"页面的异常监控"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#页面的异常监控"}},[v._v("#")]),v._v(" 页面的异常监控")]),v._v(" "),_("p",[_("img",{attrs:{src:t(822),alt:""}})]),v._v(" "),_("h2",{attrs:{id:"sdk-改动点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#sdk-改动点"}},[v._v("#")]),v._v(" sdk 改动点")]),v._v(" "),_("ol",[_("li",[v._v("页面相关\n"),_("ul",[_("li",[v._v("在 "),_("code",[v._v("imooc monitor")]),v._v(" 表中添加 "),_("code",[v._v("user_id")]),v._v(" 和 "),_("code",[v._v("visitor_id")]),v._v(" 两个字段")]),v._v(" "),_("li",[v._v("在"),_("code",[v._v("SDK")]),v._v(" 中添加获取 "),_("code",[v._v("user id")]),v._v(" 和 "),_("code",[v._v("visitor id")]),v._v(" 的逻辑，并判断当 "),_("code",[v._v("visitor id")]),v._v("不存在时，自动生成")]),v._v(" "),_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中针对页面 "),_("code",[v._v("click")]),v._v(" 事件进行监听，当触发 "),_("code",[v._v("click")]),v._v(" 事件时自动进行上报")]),v._v(" "),_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加自动获取用户停留时长的逻辑")])])]),v._v(" "),_("li",[v._v("模块相关\n"),_("ul",[_("li",[v._v("在"),_("code",[v._v("imooc monitor")]),v._v(" 表中添加 "),_("code",[v._v("mod id")]),v._v(" 字段，用于标识模块曝光和点击信息")]),v._v(" "),_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加上报日志时，获取 "),_("code",[v._v("mod id")]),v._v(" 的逻辑")])])]),v._v(" "),_("li",[v._v("性能相关\n"),_("ul",[_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加性能采集日志，并自动完成上报")]),v._v(" "),_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加上报 "),_("code",[v._v("API")]),v._v(" 请求时间的 "),_("code",[v._v("API")])])])]),v._v(" "),_("li",[v._v("异常相关\n"),_("ul",[_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加全局异常监控日志上报")]),v._v(" "),_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加全局"),_("code",[v._v("promise")]),v._v("异常监控日志上报")]),v._v(" "),_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加自定义上报 "),_("code",[v._v("API")])]),v._v(" "),_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加 "),_("code",[v._v("API")]),v._v(" 异常上报 "),_("code",[v._v("API")])]),v._v(" "),_("li",[v._v("在 "),_("code",[v._v("SDK")]),v._v(" 中添加业务异常上报 "),_("code",[v._v("API")])])])])]),v._v(" "),_("h2",{attrs:{id:"前端性能监控结构图"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前端性能监控结构图"}},[v._v("#")]),v._v(" 前端性能监控结构图")]),v._v(" "),_("p",[_("img",{attrs:{src:t(823),alt:""}}),v._v(" "),_("img",{attrs:{src:t(824),alt:""}}),v._v(" "),_("img",{attrs:{src:t(825),alt:""}}),v._v(" "),_("img",{attrs:{src:t(826),alt:""}}),v._v(" "),_("img",{attrs:{src:t(827),alt:""}})])])}),[],!1,null,null,null);_.default=e.exports}}]);