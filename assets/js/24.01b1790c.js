(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{677:function(t,a,s){t.exports=s.p+"assets/img/vue-lifecycle.bc5ef8df.png"},782:function(t,a,s){"use strict";s.r(a);var e=s(74),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue2-vue3-面试题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue2-vue3-面试题"}},[t._v("#")]),t._v(" VUE2 VUE3 面试题")]),t._v(" "),a("h2",{attrs:{id:"vue-computed-和-watch-区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-computed-和-watch-区别"}},[t._v("#")]),t._v(" Vue computed 和 watch 区别")]),t._v(" "),a("h3",{attrs:{id:"两者设计用途不同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#两者设计用途不同"}},[t._v("#")]),t._v(" 两者设计用途不同")]),t._v(" "),a("ul",[a("li",[t._v("computed 用于产出二次处理之后的数据，如对于一个列表进行 filter 处理")]),t._v(" "),a("li",[t._v("watch 用于监听数据变化（如 v-model 时，数据可能被动改变，需要监听才能拿到）")])]),t._v(" "),a("h3",{attrs:{id:"computed-有缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#computed-有缓存"}},[t._v("#")]),t._v(" computed 有缓存")]),t._v(" "),a("ul",[a("li",[t._v("computed 有缓存，data 不变则缓存不失效")]),t._v(" "),a("li",[t._v("methods 无缓存，实时计算")])]),t._v(" "),a("h3",{attrs:{id:"答案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案"}},[t._v("#")]),t._v(" 答案")]),t._v(" "),a("ul",[a("li",[t._v("computed 就已有数据产出新数据，有缓存")]),t._v(" "),a("li",[t._v("watch 监听已有数据")])]),t._v(" "),a("h2",{attrs:{id:"vue-组件通讯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-组件通讯"}},[t._v("#")]),t._v(" Vue 组件通讯")]),t._v(" "),a("h3",{attrs:{id:"props-emit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#props-emit"}},[t._v("#")]),t._v(" props / $emit")]),t._v(" "),a("p",[t._v("适用于父子组件。")]),t._v(" "),a("ul",[a("li",[t._v("父组件向子组件传递 props 和事件")]),t._v(" "),a("li",[t._v("子组件接收 props ，使用 "),a("code",[t._v("this.$emit")]),t._v(" 调用事件")])]),t._v(" "),a("h3",{attrs:{id:"自定义事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义事件"}},[t._v("#")]),t._v(" 自定义事件")]),t._v(" "),a("p",[t._v("适用于兄弟组件，或者“距离”较远的组件。")]),t._v(" "),a("p",[t._v("常用 API")]),t._v(" "),a("ul",[a("li",[t._v("绑定事件 "),a("code",[t._v("event.on(key, fn)")]),t._v(" 或 "),a("code",[t._v("event.once(key, fn)")])]),t._v(" "),a("li",[t._v("触发事件 "),a("code",[t._v("event.emit(key, data)")])]),t._v(" "),a("li",[t._v("解绑事件 "),a("code",[t._v("event.off(key, fn)")])])]),t._v(" "),a("p",[t._v("Vue 版本的区别")]),t._v(" "),a("ul",[a("li",[t._v("Vue 2.x 可以使用 Vue 实例作为自定义事件")]),t._v(" "),a("li",[t._v("Vue 3.x 需要使用第三方的自定义事件，例如 https://www.npmjs.com/package/event-emitter")])]),t._v(" "),a("p",[t._v("【注意】组件销毁时记得 "),a("code",[t._v("off")]),t._v(" 事件，否则可能会造成内存泄漏")]),t._v(" "),a("h3",{attrs:{id:"attrs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#attrs"}},[t._v("#")]),t._v(" $attrs")]),t._v(" "),a("p",[a("code",[t._v("$attrs")]),t._v(" 存储是父组件中传递过来的，且未在 "),a("code",[t._v("props")]),t._v(" 和 "),a("code",[t._v("emits")]),t._v(" 中定义的属性和事件。"),a("br"),t._v("\n相当于 "),a("code",[t._v("props")]),t._v(" 和 "),a("code",[t._v("emits")]),t._v(" 的一个补充。")]),t._v(" "),a("p",[t._v("继续向下级传递，可以使用 "),a("code",[t._v('v-bind="$attrs"')]),t._v("。这会在下级组件中渲染 DOM 属性，可以用 "),a("code",[t._v("inheritAttrs: false")]),t._v(" 避免。")]),t._v(" "),a("p",[t._v("【注意】Vue3 中移除了 "),a("code",[t._v("$listeners")]),t._v(" ，合并到了 "),a("code",[t._v("$attrs")]),t._v(" 中。")]),t._v(" "),a("h3",{attrs:{id:"parent"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parent"}},[t._v("#")]),t._v(" $parent")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("this.$parent")]),t._v(" 可以获取父组件，并可以继续获取属性、调用方法等。")]),t._v(" "),a("p",[t._v("【注意】Vue3 中移除了 "),a("code",[t._v("$children")]),t._v(" ，建议使用 "),a("code",[t._v("$refs")])]),t._v(" "),a("h3",{attrs:{id:"refs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#refs"}},[t._v("#")]),t._v(" $refs")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("this.$refs.xxx")]),t._v(" 可以获取某个子组件，前提是模板中要设置 "),a("code",[t._v('ref="xxx"')]),t._v("。")]),t._v(" "),a("p",[t._v("【注意】要在 "),a("code",[t._v("mounted")]),t._v(" 中获取 "),a("code",[t._v("this.$refs")]),t._v(" ，不能在 "),a("code",[t._v("created")]),t._v(" 中获取。")]),t._v(" "),a("h3",{attrs:{id:"provide-inject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#provide-inject"}},[t._v("#")]),t._v(" provide / inject")]),t._v(" "),a("p",[t._v("父子组件通讯方式非常多。如果是多层级的上下级组件通讯，可以使用 provide 和 inject 。"),a("br"),t._v("\n在上级组件定一个 provide ，下级组件即可通过 inject 接收。")]),t._v(" "),a("ul",[a("li",[t._v("传递静态数据直接使用 "),a("code",[t._v("provide: { x: 10 }")]),t._v(" 形式")]),t._v(" "),a("li",[t._v("传递组件数据需要使用 "),a("code",[t._v("provide() { return { x: this.xx } }")]),t._v(" 形式，但做不到响应式")]),t._v(" "),a("li",[t._v("响应式需要借助 "),a("code",[t._v("computed")]),t._v(" 来支持")])]),t._v(" "),a("h3",{attrs:{id:"vuex"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuex"}},[t._v("#")]),t._v(" Vuex")]),t._v(" "),a("p",[t._v("Vuex 全局数据管理")]),t._v(" "),a("h3",{attrs:{id:"答案-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-2"}},[t._v("#")]),t._v(" 答案")]),t._v(" "),a("ul",[a("li",[t._v("父子组件通讯\n"),a("ul",[a("li",[a("code",[t._v("props")]),t._v(" "),a("code",[t._v("emits")]),t._v(" "),a("code",[t._v("this.$emit")])]),t._v(" "),a("li",[a("code",[t._v("$attrs")]),t._v(" （也可以通过 "),a("code",[t._v('v-bind="$attrs"')]),t._v(" 向下级传递）")]),t._v(" "),a("li",[a("code",[t._v("$parent")]),t._v(" "),a("code",[t._v("$refs")])])])]),t._v(" "),a("li",[t._v("多级组件上下级\n"),a("ul",[a("li",[a("code",[t._v("provide")]),t._v(" "),a("code",[t._v("inject")])])])]),t._v(" "),a("li",[t._v("跨级、全局\n"),a("ul",[a("li",[t._v("自定义事件")]),t._v(" "),a("li",[t._v("Vuex")])])])]),t._v(" "),a("h2",{attrs:{id:"vuex-mutation-action-区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuex-mutation-action-区别"}},[t._v("#")]),t._v(" Vuex mutation action 区别")]),t._v(" "),a("h3",{attrs:{id:"答案-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-3"}},[t._v("#")]),t._v(" 答案")]),t._v(" "),a("ul",[a("li",[t._v("mutation\n"),a("ul",[a("li",[t._v("建议原子操作，每次只修改一个数据，不要贪多")]),t._v(" "),a("li",[t._v("必须是同步代码，方便查看 devTools 中的状态变化")])])]),t._v(" "),a("li",[t._v("action\n"),a("ul",[a("li",[t._v("可包含多个 mutation")]),t._v(" "),a("li",[t._v("可以是异步操作")])])])]),t._v(" "),a("p",[t._v("Vue 每个生命周期都做了什么")]),t._v(" "),a("h2",{attrs:{id:"vue-生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-生命周期"}},[t._v("#")]),t._v(" Vue 生命周期")]),t._v(" "),a("p",[a("img",{attrs:{src:s(677),alt:""}})]),t._v(" "),a("h3",{attrs:{id:"beforecreate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beforecreate"}},[t._v("#")]),t._v(" beforeCreate")]),t._v(" "),a("p",[t._v("初始化一个空的 Vue 实例，"),a("code",[t._v("data")]),t._v(" "),a("code",[t._v("methods")]),t._v(" 等尚未被初始化，无法调用。")]),t._v(" "),a("h3",{attrs:{id:"created"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#created"}},[t._v("#")]),t._v(" created")]),t._v(" "),a("p",[t._v("Vue 实例初始化完成，"),a("code",[t._v("data")]),t._v(" "),a("code",[t._v("methods")]),t._v(" 都已初始化完成，可调用。"),a("br"),t._v("\n但尚未开始渲染模板。")]),t._v(" "),a("h3",{attrs:{id:"beforemount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beforemount"}},[t._v("#")]),t._v(" beforeMount")]),t._v(" "),a("p",[t._v("编译模板，调用 "),a("code",[t._v("render")]),t._v(" 函数生成 vdom ，但还没有开始渲染 DOM")]),t._v(" "),a("h3",{attrs:{id:"mounted"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mounted"}},[t._v("#")]),t._v(" mounted")]),t._v(" "),a("p",[t._v("渲染 DOM 完成，页面更新。组件创建完成，开始进入运行阶段。")]),t._v(" "),a("h3",{attrs:{id:"beforeupdate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beforeupdate"}},[t._v("#")]),t._v(" beforeUpdate")]),t._v(" "),a("p",[t._v("在数据发生改变后，DOM 被更新之前被调用。这里适合在现有 DOM 将要被更新之前访问它，比如移除手动添加的事件监听器。")]),t._v(" "),a("h3",{attrs:{id:"updated"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#updated"}},[t._v("#")]),t._v(" updated")]),t._v(" "),a("p",[t._v("在数据更改导致的虚拟 DOM 重新渲染和更新完毕之后被调用。")]),t._v(" "),a("p",[t._v("注意，尽量不要在 "),a("code",[t._v("updated")]),t._v(" 中继续修改数据，否则可能会触发死循环。")]),t._v(" "),a("h3",{attrs:{id:"onactivated"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onactivated"}},[t._v("#")]),t._v(" onActivated")]),t._v(" "),a("p",[t._v("被 "),a("code",[t._v("keep-alive")]),t._v(" 缓存的组件激活时调用。")]),t._v(" "),a("h3",{attrs:{id:"ondeactivated"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ondeactivated"}},[t._v("#")]),t._v(" onDeactivated")]),t._v(" "),a("p",[t._v("被 "),a("code",[t._v("keep-alive")]),t._v(" 缓存的组件停用时调用。")]),t._v(" "),a("h3",{attrs:{id:"beforeunmount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beforeunmount"}},[t._v("#")]),t._v(" beforeUnmount")]),t._v(" "),a("p",[t._v("组件进入销毁阶段。")]),t._v(" "),a("p",[t._v("卸载组件实例后调用，在这个阶段，实例仍然是完全正常的。"),a("br"),t._v("\n移除、解绑一些全局事件、自定义事件，可以在此时操作。")]),t._v(" "),a("h3",{attrs:{id:"unmounted"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unmounted"}},[t._v("#")]),t._v(" unmounted")]),t._v(" "),a("p",[t._v("卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除，所有子组件实例被卸载。")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"连环问-如何正确的操作-dom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连环问-如何正确的操作-dom"}},[t._v("#")]),t._v(" 连环问：如何正确的操作 DOM")]),t._v(" "),a("p",[a("code",[t._v("mounted")]),t._v(" 和 "),a("code",[t._v("updated")]),t._v(" 都不会保证所有子组件都挂载完成，如果想等待所有视图都渲染完成，需要使用 "),a("code",[t._v("$nextTick")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$nextTick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 仅在整个视图都被渲染之后才会运行的代码")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"连环问-ajax-放在哪个生命周期合适"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连环问-ajax-放在哪个生命周期合适"}},[t._v("#")]),t._v(" 连环问：ajax 放在哪个生命周期合适？")]),t._v(" "),a("p",[t._v("一般有两个选择："),a("code",[t._v("created")]),t._v(" 和 "),a("code",[t._v("mounted")]),t._v(" ，建议选择后者 "),a("code",[t._v("mounted")]),t._v(" 。")]),t._v(" "),a("p",[t._v("执行速度")]),t._v(" "),a("ul",[a("li",[t._v("从理论上来说，放在 "),a("code",[t._v("created")]),t._v(" 确实会快一些")]),t._v(" "),a("li",[t._v("但 ajax 是网络请求，其时间是主要的影响因素。从 "),a("code",[t._v("created")]),t._v(" 到 "),a("code",[t._v("mounted")]),t._v(" 是 JS 执行，速度非常快。")]),t._v(" "),a("li",[t._v("所以，两者在执行速度上不会有肉眼可见的差距")])]),t._v(" "),a("p",[t._v("代码的阅读和理解")]),t._v(" "),a("ul",[a("li",[t._v("放在 "),a("code",[t._v("created")]),t._v(" 却会带来一些沟通和理解成本，从代码的执行上来看，它会一边执行组件渲染，一边触发网络请求，并行")]),t._v(" "),a("li",[t._v("放在 "),a("code",[t._v("mounted")]),t._v(" 就是等待 DOM 渲染完成再执行网络请求，串行，好理解")])]),t._v(" "),a("p",[t._v("所以，综合来看，更建议选择 "),a("code",[t._v("mounted")]),t._v(" 。")]),t._v(" "),a("h3",{attrs:{id:"连环问-composition-api-生命周期有何不同"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连环问-composition-api-生命周期有何不同"}},[t._v("#")]),t._v(" 连环问：Composition API 生命周期有何不同")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("setup")]),t._v(" 代替了 "),a("code",[t._v("beforeCreate")]),t._v(" 和 "),a("code",[t._v("created")])]),t._v(" "),a("li",[t._v("生命周期换成了函数的形式，如 "),a("code",[t._v("mounted")]),t._v(" -> "),a("code",[t._v("onMounted")]),t._v(" 参考 https://v3.cn.vuejs.org/api/composition-api.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" onUpdated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onMounted "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mounted'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUpdated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'updated'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"vue-router-模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router-模式"}},[t._v("#")]),t._v(" Vue-router 模式")]),t._v(" "),a("h3",{attrs:{id:"v4-的升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v4-的升级"}},[t._v("#")]),t._v(" v4 的升级")]),t._v(" "),a("p",[t._v("Vue-router v4 升级之后，"),a("code",[t._v("mode: 'xxx'")]),t._v(" 替换为 API 的形式，但功能是一样的")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("mode: 'hash'")]),t._v(" 替换为 "),a("code",[t._v("createWebHashHistory()")])]),t._v(" "),a("li",[a("code",[t._v("mode: 'history'")]),t._v(" 替换为 "),a("code",[t._v("createWebHistory()")])]),t._v(" "),a("li",[a("code",[t._v("mode: 'abstract'")]),t._v(" 替换为 "),a("code",[t._v("createMemoryHistory()")])])]),t._v(" "),a("p",[t._v("PS：个人感觉，叫 "),a("code",[t._v("memory")]),t._v(" 比叫 "),a("code",[t._v("abstract")]),t._v(" 更易理解，前者顾名思义，后者就过于抽象。")]),t._v(" "),a("h3",{attrs:{id:"hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[t._v("#")]),t._v(" hash")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://127.0.0.1:8881/hash.html?a=100&b=20#/aaa/bbb")]),t._v("\nlocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("protocol "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'http:'")]),t._v("\nlocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hostname "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '127.0.0.1'")]),t._v("\nlocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '127.0.0.1:8881'")]),t._v("\nlocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '8881'")]),t._v("\nlocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '/hash.html'")]),t._v("\nlocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '?a=100&b=20'")]),t._v("\nlocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '#/aaa/bbb'")]),t._v("\n")])])]),a("p",[t._v("hash 的特点")]),t._v(" "),a("ul",[a("li",[t._v("会触发页面跳转，可使用浏览器的“后退” “前进”")]),t._v(" "),a("li",[t._v("但不会刷新页面，支持 SPA 必须的特性")]),t._v(" "),a("li",[t._v("hash 不会被提交到 server 端（因此刷新页面也会命中当前页面，让前端根据 hash 处理路由）")])]),t._v(" "),a("p",[t._v("url 中的 hash ，是不会发送给 server 端的。前端 "),a("code",[t._v("onhashchange")]),t._v(" 拿到自行处理。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面初次加载，获取 hash")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DOMContentLoaded'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hash'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// hash 变化，包括：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a. JS 修改 url")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// b. 手动修改 url 的 hash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// c. 浏览器前进、后退")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onhashchange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'old url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("oldURL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'new url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newURL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hash'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"h5-history-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h5-history-api"}},[t._v("#")]),t._v(" H5 history API")]),t._v(" "),a("p",[t._v("常用的两个 API")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("history.pushState")])]),t._v(" "),a("li",[a("code",[t._v("window.onpopstate")])])]),t._v(" "),a("p",[t._v("页面刷新时，"),a("strong",[t._v("服务端要做处理")]),t._v("，可参考"),a("a",{attrs:{href:"https://router.vuejs.org/zh/guide/essentials/history-mode.html#%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E4%BE%8B%E5%AD%90",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("。。即无论什么 url 访问 server ，都要返回该页面。")]),t._v(" "),a("p",[t._v("按照 url 规范，不同的 url 对应不同的资源，例如：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("https://github.com/")]),t._v(" server 返回首页")]),t._v(" "),a("li",[a("code",[t._v("https://github.com/username/")]),t._v(" server 返回用户页")]),t._v(" "),a("li",[a("code",[t._v("https://github.com/username/project1/")]),t._v(" server 返回项目页")])]),t._v(" "),a("p",[t._v("但是用了 SPA 的前端路由，就改变了这一规则，假如 github 用了的话：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("https://github.com/")]),t._v(" server 返回首页")]),t._v(" "),a("li",[a("code",[t._v("https://github.com/username/")]),t._v(" server 返回首页，前端路由跳转到用户页")]),t._v(" "),a("li",[a("code",[t._v("https://github.com/username/project1/")]),t._v(" server 返回首页，前端路由跳转到项目页")])]),t._v(" "),a("p",[t._v("所以，从开发者的实现角度来看，前端路由是一个违反规则的形式。\n但是从不关心后端，只关心前端页面的用户，或者浏览器来看，更喜欢 "),a("code",[t._v("pushState")]),t._v(" 这种方式。")]),t._v(" "),a("p",[t._v("代码参考 history-api.html")]),t._v(" "),a("h3",{attrs:{id:"三种模式的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三种模式的区别"}},[t._v("#")]),t._v(" 三种模式的区别")]),t._v(" "),a("ul",[a("li",[t._v("hash - 使用 url hash 变化记录路由地址")]),t._v(" "),a("li",[t._v("history - 使用 H5 history API 来改 url 记录路由地址")]),t._v(" "),a("li",[t._v("abstract - 不修改 url ，路由地址在内存中，"),a("strong",[t._v("但页面刷新会重新回到首页")]),t._v("。")])]),t._v(" "),a("h2",{attrs:{id:"你在实际工作中-做过哪些-vue-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#你在实际工作中-做过哪些-vue-优化"}},[t._v("#")]),t._v(" 你在实际工作中，做过哪些 Vue 优化？")]),t._v(" "),a("h3",{attrs:{id:"v-if-和-v-show"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v-if-和-v-show"}},[t._v("#")]),t._v(" v-if 和 v-show")]),t._v(" "),a("p",[t._v("区别")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("v-if")]),t._v(" 组件销毁/重建")]),t._v(" "),a("li",[a("code",[t._v("v-show")]),t._v(" 组件隐藏（切换 CSS "),a("code",[t._v("display")]),t._v("）")])]),t._v(" "),a("p",[t._v("场景")]),t._v(" "),a("ul",[a("li",[t._v("一般情况下使用 "),a("code",[t._v("v-if")]),t._v(" 即可，普通组件的销毁、渲染不会造成性能问题")]),t._v(" "),a("li",[t._v("如果组件创建时需要大量计算，或者大量渲染（如复杂的编辑器、表单、地图等），可以考虑 "),a("code",[t._v("v-show")])])]),t._v(" "),a("h3",{attrs:{id:"v-for-使用-key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v-for-使用-key"}},[t._v("#")]),t._v(" v-for 使用 key")]),t._v(" "),a("p",[a("code",[t._v("key")]),t._v(" 可以优化内部的 diff 算法。注意，遍历数组时 "),a("code",[t._v("key")]),t._v(" 不要使用 "),a("code",[t._v("index")]),t._v(" 。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 而且，key 不要用 index --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-for")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("(id, name) in list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{name}}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h3",{attrs:{id:"computed-缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#computed-缓存"}},[t._v("#")]),t._v(" computed 缓存")]),t._v(" "),a("p",[a("code",[t._v("computed")]),t._v(" 可以缓存计算结果，"),a("code",[t._v("data")]),t._v(" 不变则缓存不失效。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("msgList")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 消息列表")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("computed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 未读消息的数量")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unreadCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msgList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("m")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"keep-alive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keep-alive"}},[t._v("#")]),t._v(" keep-alive")]),t._v(" "),a("p",[a("code",[t._v("<keep-alive>")]),t._v(" 可以缓存子组件，只创建一次。通过 "),a("code",[t._v("activated")]),t._v(" 和 "),a("code",[t._v("deactivated")]),t._v(" 生命周期监听是否显示状态。"),a("br"),t._v("\n代码参考 components/KeepAlive/index.vue")]),t._v(" "),a("p",[t._v("场景")]),t._v(" "),a("ul",[a("li",[t._v("局部频繁切换的组件，如 tabs")]),t._v(" "),a("li",[t._v("不可乱用 "),a("code",[t._v("<keep-alive>")]),t._v(" ，缓存太多会占用大量内存，而且出问题不好 debug")])]),t._v(" "),a("h3",{attrs:{id:"异步组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步组件"}},[t._v("#")]),t._v(" 异步组件")]),t._v(" "),a("p",[t._v("对于体积大的组件（如编辑器、表单、地图等）可以使用异步组件")]),t._v(" "),a("ul",[a("li",[t._v("拆包，需要时异步加载，不需要时不加载")]),t._v(" "),a("li",[t._v("减少 main 包的体积，页面首次加载更快")])]),t._v(" "),a("p",[t._v("vue3 使用 "),a("code",[t._v("defineAsyncComponent")]),t._v(" 加载异步组件，代码参考 components/AsyncComponent/index.vue")]),t._v(" "),a("h3",{attrs:{id:"路由懒加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由懒加载"}},[t._v("#")]),t._v(" 路由懒加载")]),t._v(" "),a("p",[t._v("对于一些补偿访问的路由，或者组件提交比较大的路由，可以使用路由懒加载。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Home'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Home\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/about'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'About'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 路由懒加载")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "about" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../views/About.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h3",{attrs:{id:"ssr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssr"}},[t._v("#")]),t._v(" SSR")]),t._v(" "),a("p",[t._v("SSR 让网页访问速度更快，对 SEO 友好。")]),t._v(" "),a("p",[t._v("但 SSR 使用和调试成本高，不可乱用。例如，一个低代码项目（在线制作 H5 网页），toB 部分不可用 SSR ， toC 部分适合用 SSR 。")]),t._v(" "),a("h3",{attrs:{id:"答案-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-4"}},[t._v("#")]),t._v(" 答案")]),t._v(" "),a("ul",[a("li",[t._v("v-if 和 v-show")]),t._v(" "),a("li",[t._v("v-for 使用 key")]),t._v(" "),a("li",[t._v("computed 缓存")]),t._v(" "),a("li",[t._v("keep-alive")]),t._v(" "),a("li",[t._v("异步组件")]),t._v(" "),a("li",[t._v("路由懒加载")]),t._v(" "),a("li",[t._v("SSR")])]),t._v(" "),a("h2",{attrs:{id:"连环问-vue-遇到过哪些坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连环问-vue-遇到过哪些坑"}},[t._v("#")]),t._v(" 连环问：Vue 遇到过哪些坑？？？")]),t._v(" "),a("p",[t._v("全局事件、自定义事件要在组件销毁时解除绑定")]),t._v(" "),a("ul",[a("li",[t._v("内存泄漏风险")]),t._v(" "),a("li",[t._v("全局事件（如 "),a("code",[t._v("window.resize")]),t._v("）不解除，则会继续监听，而且组件再次创建时会重复绑定")])]),t._v(" "),a("p",[t._v("Vue2.x 中，无法监听 data 属性的新增和删除，以及数组的部分修改 —— Vue3 不会有这个问题")]),t._v(" "),a("ul",[a("li",[t._v("新增 data 属性，需要用 "),a("code",[t._v("Vue.set")])]),t._v(" "),a("li",[t._v("删除 data 属性，需要用 "),a("code",[t._v("Vue.delete")])]),t._v(" "),a("li",[t._v("修改数组某一元素，不能 "),a("code",[t._v("arr[index] = value")]),t._v(" ，要使用 "),a("code",[t._v("arr.splice")]),t._v(" API 方式")])]),t._v(" "),a("p",[t._v("路由切换时，页面会 scroll 到顶部。例如，在一个新闻列表页下滑到一定位置，点击进入详情页，在返回列表页，此时会 scroll 到顶部，并重新渲染列表页。所有的 SPA 都会有这个问题，并不仅仅是 Vue 。")]),t._v(" "),a("ul",[a("li",[t._v("在列表页缓存数据和 "),a("code",[t._v("scrollTop")])]),t._v(" "),a("li",[t._v("返回列表页时（用 Vue-router "),a("a",{attrs:{href:"https://router.vuejs.org/zh/guide/advanced/navigation-guards.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("导航守卫"),a("OutboundLink")],1),t._v("，判断 "),a("code",[t._v("from")]),t._v("），使用缓存数据渲染页面，然后 "),a("code",[t._v("scrollTo(scrollTop)")])])]),t._v(" "),a("h2",{attrs:{id:"vue-错误监听"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-错误监听"}},[t._v("#")]),t._v(" Vue 错误监听")]),t._v(" "),a("h3",{attrs:{id:"window-onerror"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#window-onerror"}},[t._v("#")]),t._v(" window.onerror")]),t._v(" "),a("p",[t._v("可以监听当前页面所有的 JS 报错，jQuery 时代经常用。"),a("br"),t._v("\n注意，全局只绑定一次即可。不要放在多次渲染的组件中，这样容易绑定多次。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" column"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'window.onerror---------'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" column"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意，如果用 window.addEventListener('error', event => {}) 参数不一样！！！")]),t._v("\n")])])]),a("h3",{attrs:{id:"errorcaptured-生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#errorcaptured-生命周期"}},[t._v("#")]),t._v(" errorCaptured 生命周期")]),t._v(" "),a("p",[t._v("会监听所有"),a("strong",[t._v("下级组件")]),t._v("的错误。可以返回 "),a("code",[t._v("false")]),t._v(" 阻止向上传播，因为可能会有多个上级节点都监听错误。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("errorCaptured")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'errorCaptured--------'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"errorhandler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#errorhandler"}},[t._v("#")]),t._v(" errorHandler")]),t._v(" "),a("p",[t._v("全局的错误监听，所有组件的报错都会汇总到这里来。PS：如果 "),a("code",[t._v("errorCaptured")]),t._v(" 返回 "),a("code",[t._v("false")]),t._v(" 则"),a("strong",[t._v("不会")]),t._v("到这里。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createApp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("errorHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'errorHandler--------'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("请注意，"),a("code",[t._v("errorHandler")]),t._v(" 会阻止错误走向 "),a("code",[t._v("window.onerror")]),t._v("。")]),t._v(" "),a("p",[t._v("PS：还有 "),a("code",[t._v("warnHandler")])]),t._v(" "),a("h3",{attrs:{id:"异步错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步错误"}},[t._v("#")]),t._v(" 异步错误")]),t._v(" "),a("p",[t._v("组件内的异步错误 "),a("code",[t._v("errorHandler")]),t._v(" 监听不到，还是需要 "),a("code",[t._v("window.onerror")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout 报错'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("h3",{attrs:{id:"答案-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#答案-5"}},[t._v("#")]),t._v(" 答案")]),t._v(" "),a("p",[t._v("方式")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("errorCaptured")]),t._v(" 监听下级组件的错误，可返回 "),a("code",[t._v("false")]),t._v(" 阻止向上传播")]),t._v(" "),a("li",[a("code",[t._v("errorHandler")]),t._v(" 监听 Vue 全局错误")]),t._v(" "),a("li",[a("code",[t._v("window.onerror")]),t._v(" 监听其他的 JS 错误，如异步")])]),t._v(" "),a("p",[t._v("建议：结合使用")]),t._v(" "),a("ul",[a("li",[t._v("一些重要的、复杂的、有运行风险的组件，可使用 "),a("code",[t._v("errorCaptured")]),t._v(" 重点监听")]),t._v(" "),a("li",[t._v("然后用 "),a("code",[t._v("errorHandler")]),t._v(" "),a("code",[t._v("window.onerror")]),t._v(" 候补全局监听，避免意外情况")])]),t._v(" "),a("h3",{attrs:{id:"扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扩展"}},[t._v("#")]),t._v(" 扩展")]),t._v(" "),a("p",[t._v("Promise 监听报错要使用 "),a("code",[t._v("window.onunhandledrejection")])])])}),[],!1,null,null,null);a.default=n.exports}}]);